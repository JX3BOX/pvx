(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07a22468"],{"01bf":function(e,a,t){},"0264":function(e,a,t){"use strict";t("3184")},1093:function(e){e.exports=JSON.parse('{"std":{"nMajorVersion":1,"nVersion":5},"origin":{"nMajorVersion":2,"nVersion":2}}')},1797:function(e,a,t){"use strict";t("7d87")},"1a3a":function(e){e.exports=JSON.parse('{"CHEEK_Y":0,"CHEEK_Z":0,"EYEBOW_DIRC":0,"EYEBOW_OUT":0,"EYEBOW_POS":0,"EYECROW_Y":0,"EYE_DIRC":0,"EYE_DIST":0,"EYE_OPEN":0,"EYE_POS":0,"EYE_SIZE":0,"FACE_SCALE":0,"FACE_Y":0,"FACE_Z":0,"JAW_END":0,"JAW_LENGTH":0,"JAW_POS":0,"JAW_ROT":0,"JAW_WIDTH":0,"LOW_FACE":0,"LOW_LID_POS":0,"LOW_LIP":0,"LOW_LIP_OUT":0,"LOW_LIP_POS":0,"MOUTH_END":0,"MOUTH_END_L":0,"MOUTH_END_R":0,"MOUTH_OPEN":0,"MOUTH_OUT":0,"MOUTH_POS":0,"MOUTH_ROT":0,"MOUTH_SIZE":0,"NOSEBOW_BEND":0,"NOSEBOW_WIDTH":0,"NOSETOP_POS_Y":0,"NOSETOP_POS_Z":0,"NOSETOP_UP":0,"NOSETOP_WIDTH":0,"NOSE_HEIGHT":0,"NOSE_SIZE":0,"OUT":0,"PUPIL_DIRC":0,"PUPIL_SIZE":0,"RIDGE_Y":0,"UP_FACE":0,"UP_LID_POS":0,"UP_LIP":0,"UP_LIP_OUT":0,"UP_LIP_POS":0}')},3184:function(e,a,t){},"73a2":function(e,a,t){"use strict";t.r(a);var c=function(){var e=this,a=e._self._c;return a("div",{staticClass:"m-facedata"},[a("div",{staticClass:"m-face-parse",class:{on:e.done}},[a("h1",{staticClass:"m-face-parse-title"},[e._v("捏脸数据解析器")]),a("Upload",{attrs:{type:"face"},on:{success:e.handleSuccess},scopedSlots:e._u([{key:"guide",fn:function(){return[a("a",{staticClass:"u-help",attrs:{href:"/tool/746",target:"_blank"}},[a("i",{staticClass:"el-icon-collection"}),e._v(" 游戏脸型导入导出指南 ")])]},proxy:!0}])}),e.data?a("Facedat",{staticClass:"m-face-parse-preview",attrs:{data:e.data,lock:!0}}):e._e()],1)])},s=[],n=t("e0bb"),l=t("808d"),i=(t("65c2"),{name:"FacedataParse",props:[],data:function(){return{data:"",done:!1}},computed:{json:function(){return this.data&&this.data.json}},methods:{handleSuccess:function(e){this.data=e,null!==e&&void 0!==e&&e.json?this.done=!0:this.done=!1}},mounted:function(){},components:{Facedat:n["a"],Upload:l["a"]}}),o=i,r=(t("1797"),t("2877")),d=Object(r["a"])(o,c,s,!1,null,null,null);a["default"]=d.exports},"7d87":function(e,a,t){},cd54:function(e){e.exports=JSON.parse('{"std":["nColorID","nShowID","bUse","fValue1","fValue2","fValue3"],"origin":["nColorID","nShowID"]}')},cec9:function(e,a,t){"use strict";t("de2e")},de2e:function(e,a,t){},e0bb:function(e,a,t){"use strict";var c=function(){var e=this,a=e._self._c;return e.ready?a("div",{staticClass:"c-facedat"},[e.decalDb&&e.facedata.bNewFace?a("NewFace",{attrs:{facedata:e.facedata,body_type:e.body_type,cleandata:e.cleandata,clean:e.clean,lock:e.lock,decalDb:e.decalDb}}):e._e(),e.decalDb&&!e.facedata.bNewFace?a("OldFace",{attrs:{facedata:e.facedata,body_type:e.body_type,cleandata:e.cleandata,clean:e.clean,lock:e.lock,decalDb:e.decalDb}},[a("div",{staticClass:"u-clean-button",on:{click:function(a){e.clean=!0,e.visible=!e.visible}}},[e._v(" 数据清洗 ")])]):e._e(),a("el-dialog",{attrs:{title:"数据清洗","custom-class":"m-data-clean",visible:e.visible},on:{"update:visible":function(a){e.visible=a},close:function(a){e.clean=!1}}},[a("div",{staticClass:"m-button"},[a("el-button",{staticClass:"u-btn",attrs:{type:"primary",icon:"el-icon-receiving"},on:{click:function(a){return e.buildData("std")}}},[e._v("导出正式服")]),a("el-button",{staticClass:"u-btn",attrs:{type:"warning",icon:"el-icon-receiving"},on:{click:function(a){return e.buildData("origin")}}},[e._v("导出怀旧服")])],1)])],1):e._e()},s=[],n=(t("caad"),t("fb6a"),t("2532"),t("2ef0")),l=t.n(n),i=(t("f7bb"),t("65c2"),t("0a4e")),o=t("b9cd"),r=t("cd54"),d=t("1a3a"),u=t("dff1"),f=t("1093"),p=t("896e"),b=t("d4f4"),v=t("21a6"),y=t("1218"),m=(t("b680"),t("b64b"),function(){var e=this,a=e._self._c;return a("div",[a("div",{staticClass:"c-facedat-tab"},[a("el-radio-group",{model:{value:e.active,callback:function(a){e.active=a},expression:"active"}},[a("el-radio-button",{staticClass:"u-filter",attrs:{label:"contour"}},[e._v("轮廓")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"eyebrow"}},[e._v("眉毛")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"eye"}},[e._v("眼部")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"nose"}},[e._v("鼻子")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"mouth"}},[e._v("嘴部")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"decals"}},[e._v("妆容")])],1),e._t("default")],2),a("div",{staticClass:"c-facedat-preivew"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"contour"===e.active,expression:"active === 'contour'"}],staticClass:"c-facedat-group"},[a("el-tabs",{attrs:{type:e.tab_type},model:{value:e.subActive.contour,callback:function(a){e.$set(e.subActive,"contour",a)},expression:"subActive.contour"}},e._l(Object.keys(e.new_face_dict["轮廓"]),(function(t,c){return a("el-tab-pane",{key:c,attrs:{label:t,name:t}},e._l(Object.keys(e.new_face_dict["轮廓"][t]),(function(c,s){return a("ul",{key:s,staticClass:"u-list u-new"},["root"===c?e._l(e.new_face_dict["轮廓"][t].root,(function(t,c){return a("li",{key:t+c},[a("label",{on:{click:function(a){return e.clog(e.facedata["tBone"][t.BoneType])}}},[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e(),"root"!==c?a("li",{staticClass:"u-sub-title"},[e._v(e._s(c))]):e._e(),"root"!==c?e._l(e.new_face_dict["轮廓"][t][c],(function(t,c){return a("li",{key:c},[a("label",[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e()],2)})),0)})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"eyebrow"===e.active,expression:"active === 'eyebrow'"}],staticClass:"c-facedat-group"},[a("el-tabs",{attrs:{type:e.tab_type},model:{value:e.subActive.eyebrow,callback:function(a){e.$set(e.subActive,"eyebrow",a)},expression:"subActive.eyebrow"}},e._l(Object.keys(e.new_face_dict["眉毛"]),(function(t,c){return a("el-tab-pane",{key:c,attrs:{label:t,name:t}},e._l(Object.keys(e.new_face_dict["眉毛"][t]),(function(c,s){return a("ul",{key:s,staticClass:"u-list u-new"},["root"===c?e._l(e.new_face_dict["眉毛"][t].root,(function(t,c){return a("li",{key:t+c},[a("label",{on:{click:function(a){return e.clog(e.facedata["tBone"][t.BoneType])}}},[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e(),"root"!==c?a("li",{staticClass:"u-sub-title"},[e._v(e._s(c))]):e._e(),"root"!==c?e._l(e.new_face_dict["眉毛"][t][c],(function(t,c){return a("li",{key:c},[a("label",[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e()],2)})),0)})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"eye"===e.active,expression:"active === 'eye'"}],staticClass:"c-facedat-group"},[a("el-tabs",{attrs:{type:e.tab_type},model:{value:e.subActive.eye,callback:function(a){e.$set(e.subActive,"eye",a)},expression:"subActive.eye"}},e._l(Object.keys(e.new_face_dict["眼部"]),(function(t,c){return a("el-tab-pane",{key:c,attrs:{label:t,name:t}},e._l(Object.keys(e.new_face_dict["眼部"][t]),(function(c,s){return a("ul",{key:s,staticClass:"u-list u-new"},["root"===c?e._l(e.new_face_dict["眼部"][t].root,(function(t,c){return a("li",{key:t+c},[a("label",{on:{click:function(a){return e.clog(e.facedata["tBone"][t.BoneType])}}},[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e(),"root"!==c?a("li",{staticClass:"u-sub-title"},[e._v(e._s(c))]):e._e(),"root"!==c?e._l(e.new_face_dict["眼部"][t][c],(function(t,c){return a("li",{key:c},[a("label",[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e()],2)})),0)})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"nose"===e.active,expression:"active === 'nose'"}],staticClass:"c-facedat-group"},[a("el-tabs",{attrs:{type:e.tab_type},model:{value:e.subActive.nose,callback:function(a){e.$set(e.subActive,"nose",a)},expression:"subActive.nose"}},e._l(Object.keys(e.new_face_dict["鼻子"]),(function(t,c){return a("el-tab-pane",{key:c,attrs:{label:t,name:t}},e._l(Object.keys(e.new_face_dict["鼻子"][t]),(function(c,s){return a("ul",{key:s,staticClass:"u-list u-new"},["root"===c?e._l(e.new_face_dict["鼻子"][t].root,(function(t,c){return a("li",{key:t+c},[a("label",{on:{click:function(a){return e.clog(e.facedata["tBone"][t.BoneType])}}},[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e(),"root"!==c?a("li",{staticClass:"u-sub-title"},[e._v(e._s(c))]):e._e(),"root"!==c?e._l(e.new_face_dict["鼻子"][t][c],(function(t,c){return a("li",{key:c},[a("label",[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e()],2)})),0)})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"mouth"===e.active,expression:"active === 'mouth'"}],staticClass:"c-facedat-group"},[a("el-tabs",{attrs:{type:e.tab_type},model:{value:e.subActive.mouth,callback:function(a){e.$set(e.subActive,"mouth",a)},expression:"subActive.mouth"}},e._l(Object.keys(e.new_face_dict["嘴部"]),(function(t,c){return a("el-tab-pane",{key:c,attrs:{label:t,name:t}},e._l(Object.keys(e.new_face_dict["嘴部"][t]),(function(c,s){return a("ul",{key:s,staticClass:"u-list u-new"},["root"===c?e._l(e.new_face_dict["嘴部"][t].root,(function(t,c){return a("li",{key:t+c},[a("label",{on:{click:function(a){return e.clog(e.facedata["tBone"][t.BoneType])}}},[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e(),"root"!==c?a("li",{staticClass:"u-sub-title"},[e._v(e._s(c))]):e._e(),"root"!==c?e._l(e.new_face_dict["嘴部"][t][c],(function(t,c){return a("li",{key:c},[a("label",[e._v(e._s(t.BoneName))]),a("span",[e._v(e._s(e.facedata["tBone"][t.BoneType]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:-128,max:128,value:e.facedata["tBone"][t.BoneType]}}):a("el-slider",{staticClass:"u-range",attrs:{min:-128,max:128,disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})):e._e()],2)})),0)})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"decals"===e.active,expression:"active === 'decals'"}],staticClass:"c-facedat-group",attrs:{id:"decals"}},[a("el-tabs",{attrs:{type:e.tab_type},model:{value:e.subActive.decals,callback:function(a){e.$set(e.subActive,"decals",a)},expression:"subActive.decals"}},e._l(Object.keys(e.new_decal_group["妆容"]),(function(t,c){return a("el-tab-pane",{key:c,attrs:{label:t,name:t}},e._l(e.new_decal_group["妆容"][t],(function(t,c){return a("ul",{key:c,staticClass:"u-decals"},[e.facedata.tDecal[t.DecalsType].bUse?a("li",[a("div",{staticClass:"u-title"},[a("img",{staticClass:"u-pic",attrs:{src:e.decalDb.getDecalIcon(t.DecalsType,e.facedata.tDecal[t.DecalsType]["nShowID"],!0)}}),e._v(" "+e._s(e.decalDb.getDecalName(t.DecalsType,e.facedata.tDecal[t.DecalsType]["nShowID"],!0))+" ")]),a("span",{staticClass:"u-dname"},[e._v(" "+e._s(e.facedata.tDecal[t.DecalsType].nColorID+"号"))]),a("span",{staticClass:"u-decals-params"},[a("span",[e._v(e._s(t.Name1))]),a("span",[e._v(e._s(e.facedata.tDecal[t.DecalsType].fValue1.toFixed(2)))])]),t.bValueXY?e._e():a("span",{staticClass:"u-decals-params"},[t.bShowScroll2?[a("span",[e._v(e._s(t.Name2))]),a("span",[e._v(e._s(e.facedata.tDecal[t.DecalsType].fValue2.toFixed(2)))])]:e._e()],2),t.bValueXY?e._e():a("span",{staticClass:"u-decals-params"},[t.bShowScroll3?[a("span",[e._v(e._s(t.Name3))]),a("span",[e._v(e._s(e.facedata.tDecal[t.DecalsType].fValue3.toFixed(2)))])]:e._e()],2),t.bValueXY?a("span",{staticClass:"u-decals-params"},[a("span",[e._v("X坐标")]),a("span",[e._v(e._s(e.facedata.tDecal[t.DecalsType].fValue3.toFixed(2)))])]):e._e(),t.bValueXY?a("span",{staticClass:"u-decals-params"},[a("span",[e._v("Y坐标")]),a("span",[e._v(e._s(e.facedata.tDecal[t.DecalsType].fValue3.toFixed(2)))])]):e._e(),a("span",{staticClass:"u-price"},[e.decalDb.getDecalPrice(t.DecalsType,e.facedata.tDecal[t.DecalsType]["nShowID"],!0)?[a("i",{staticClass:"el-icon-coin"}),e._v(" "+e._s(e.decalDb.getDecalPrice(t.DecalsType,e.facedata.tDecal[t.DecalsType]["nShowID"],!0))+" 通宝")]:e._e()],2)]):e._e()])})),0)})),1),a("div",{staticClass:"c-facedat-group"},[a("ul",{staticClass:"u-decals"},[a("span",{staticClass:"u-title"},[e._v("总计")]),a("span",{staticClass:"u-total u-price"},[a("i",{staticClass:"el-icon-coin"}),a("b",[e._v(e._s(e.decalDb.getTotalPrice(e.facedata,!0)))]),e._v(" 通宝")])])])],1)])])}),D=[],h=t("8516"),C=t("a0ec"),g=t("02bb"),k=t("7ddb"),w={name:"NewFace",props:["facedata","lock","decalDb","body_type","clean"],components:{Slider:h["a"]},data:function(){return{tab_type:"card",active:"contour",subActive:{mouth:"整体",eye:"整体",nose:"整体",decals:"底妆",contour:"额头",eyebrow:"整体"},new_face_dict:C,new_decal_group:g,new_decal_type:k}},mounted:function(){console.log(this.decalDb)},computed:{cleandata:function(){if(this.clean&&this.facedata){var e=_.cloneDeep(this.facedata);for(var a in e.nDecorationID=0,e.tDecal){var t=this.decalDb.getDecalIsFree(a,e.tDecal[a]["nShowID"],!0);console.log(t),t||(e.tDecal[a]["nShowID"]=decal_default[a]["nShowID"])}return e}return this.facedata}},methods:{}},B=w,x=(t("0264"),t("2877")),O=Object(x["a"])(B,m,D,!1,null,null,null),T=O.exports,I=function(){var e=this,a=e._self._c;return a("div",[a("div",{staticClass:"c-facedat-tab"},[a("el-radio-group",{model:{value:e.active,callback:function(a){e.active=a},expression:"active"}},[a("el-radio-button",{staticClass:"u-filter",attrs:{label:"eye"}},[e._v("眼部轮廓")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"mouth"}},[e._v("嘴部轮廓")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"nose"}},[e._v("鼻子轮廓")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"face"}},[e._v("脸部轮廓")]),a("el-radio-button",{staticClass:"u-filter",attrs:{label:"decals"}},[e._v("贴花")])],1),e._t("default")],2),a("div",{staticClass:"c-facedat-preivew"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"eye"===e.active,expression:"active === 'eye'"}],staticClass:"c-facedat-group"},[a("ul",{staticClass:"u-list"},e._l(e.group["eye"],(function(t,c){return a("li",{key:t+c},[a("label",[e._v(e._s(e.dict[t]["desc"]))]),a("span",[e._v(e._s(e.facedata["tBone"][t]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:e.bone_range[e.body_type][e.dict[t]["type"]]["min"],max:e.bone_range[e.body_type][e.dict[t]["type"]]["max"],value:e.facedata["tBone"][t]}}):a("el-slider",{staticClass:"u-range",attrs:{min:e.bone_range[e.body_type][e.dict[t]["type"]]["min"],max:e.bone_range[e.body_type][e.dict[t]["type"]]["max"],disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"mouth"===e.active,expression:"active === 'mouth'"}],staticClass:"c-facedat-group"},[a("ul",{staticClass:"u-list"},e._l(e.group["mouth"],(function(t,c){return a("li",{key:t+c},[a("label",[e._v(e._s(e.dict[t]["desc"]))]),a("span",[e._v(e._s(e.facedata["tBone"][t]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:e.bone_range[e.body_type][e.dict[t]["type"]]["min"],max:e.bone_range[e.body_type][e.dict[t]["type"]]["max"],value:e.facedata["tBone"][t]}}):a("el-slider",{staticClass:"u-range",attrs:{min:e.bone_range[e.body_type][e.dict[t]["type"]]["min"],max:e.bone_range[e.body_type][e.dict[t]["type"]]["max"],disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"nose"===e.active,expression:"active === 'nose'"}],staticClass:"c-facedat-group"},[a("ul",{staticClass:"u-list"},e._l(e.group["nose"],(function(t,c){return a("li",{key:t+c},[a("label",[e._v(e._s(e.dict[t]["desc"]))]),a("span",[e._v(e._s(e.facedata["tBone"][t]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:e.bone_range[e.body_type][e.dict[t]["type"]]["min"],max:e.bone_range[e.body_type][e.dict[t]["type"]]["max"],value:e.facedata["tBone"][t]}}):a("el-slider",{staticClass:"u-range",attrs:{min:e.bone_range[e.body_type][e.dict[t]["type"]]["min"],max:e.bone_range[e.body_type][e.dict[t]["type"]]["max"],disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"face"===e.active,expression:"active === 'face'"}],staticClass:"c-facedat-group"},[a("ul",{staticClass:"u-list"},e._l(e.group["face"],(function(t,c){return a("li",{key:t+c},[a("label",[e._v(e._s(e.dict[t]["desc"]))]),a("span",[e._v(e._s(e.facedata["tBone"][t]))]),e.lock?a("slider",{staticClass:"u-range",attrs:{min:e.bone_range[e.body_type][e.dict[t]["type"]]["min"],max:e.bone_range[e.body_type][e.dict[t]["type"]]["max"],value:e.facedata["tBone"][t]}}):a("el-slider",{staticClass:"u-range",attrs:{min:e.bone_range[e.body_type][e.dict[t]["type"]]["min"],max:e.bone_range[e.body_type][e.dict[t]["type"]]["max"],disabled:e.lock},model:{value:e.facedata["tBone"][t],callback:function(a){e.$set(e.facedata["tBone"],t,a)},expression:"facedata['tBone'][key]"}})],1)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"decals"===e.active,expression:"active === 'decals'"}],staticClass:"m-facedat-decals",attrs:{id:"newDecals"}},[e._l(e.group["decal"],(function(t,c){return a("div",{key:t+c,staticClass:"c-facedat-group"},[e.cleandata["tDecal"][t]?[a("ul",{staticClass:"u-decals"},[a("li",{directives:[{name:"show",rawName:"v-show",value:!e.clean||e.checkdecal_prop(t),expression:"!clean || checkdecal_prop(key)"}]},[a("div",{staticClass:"u-title"},["右瞳"===e.dict[t]["desc"]?[e._v("左瞳")]:"左瞳"===e.dict[t]["desc"]?[e._v("右瞳")]:[e._v(e._s(e.dict[t]["desc"]))]],2),a("span",{staticClass:"u-dname"},[a("img",{staticClass:"u-pic",attrs:{src:e.decalDb.getDecalIcon(t,e.cleandata["tDecal"][t]["nShowID"])}}),e._v(e._s(e.decalDb.getDecalName(t,e.cleandata["tDecal"][t]["nShowID"])))]),e.decalDb.getDecalIsFlip(t,e.cleandata["tDecal"][t]["nShowID"])?a("span",{staticClass:"u-dflip"},[e._v("(翻转)")]):e._e(),a("span",{staticClass:"u-dcolor"},[e._v("(颜色:"+e._s(e.cleandata["tDecal"][t]["nColorID"])+")")]),a("span",{staticClass:"u-free"},[e.decalDb.getDecalIsFree(t,e.cleandata["tDecal"][t]["nShowID"])?[a("i",{staticClass:"el-icon-success"}),e._v(" 新建角色可用")]:e._e()],2),e.decalDb.getDecalPrice(t,e.cleandata["tDecal"][t]["nShowID"])?a("span",{staticClass:"u-price"},[a("i",{staticClass:"el-icon-coin"}),e._v(" "+e._s(e.decalDb.getDecalPrice(t,e.cleandata["tDecal"][t]["nShowID"]))+" 通宝 ")]):e._e()])])]:e._e()],2)})),a("div",{staticClass:"c-facedat-group"},[a("ul",{staticClass:"u-decals"},[a("li",[a("div",{staticClass:"u-title"},[e._v("装饰物")]),a("span",{staticClass:"u-dname"},[a("img",{staticClass:"u-pic",attrs:{src:e.decalDb.getDecorationIcon(e.cleandata["nDecorationID"])}}),e._v(e._s(e.decalDb.getDecorationName(e.cleandata["nDecorationID"])))]),a("span",{staticClass:"u-dname"}),a("span",{staticClass:"u-dname"}),e.decalDb.showDecorationPrice(e.cleandata["nDecorationID"])?a("span",{staticClass:"u-price"},[a("i",{staticClass:"el-icon-coin"}),e._v(" "+e._s(e.decalDb.showDecorationPrice(e.cleandata["nDecorationID"]))+" 通宝 ")]):e._e()])])]),a("div",{staticClass:"c-facedat-group"},[a("ul",{staticClass:"u-decals"},[a("div",{staticClass:"u-title"},[e._v("总计")]),a("span",{staticClass:"u-total u-price"},[a("i",{staticClass:"el-icon-coin"}),e._v(" "),a("b",[e._v(e._s(e.decalDb.getTotalPrice(e.cleandata)))]),e._v(" 通宝")])])])],2)])])},S=[],N=t("1c81"),E=t("a009"),P=t("7135"),A={name:"Jx3boxFacedatOldFace",props:["facedata","lock","decalDb","body_type","clean"],components:{Slider:h["a"]},data:function(){return{tab_type:"",active:"eye",subActive:{mouth:"整体",eye:"整体",nose:"整体",decals:"底妆",contour:"额头",eyebrow:"整体"},group:N,dict:E,bone_range:P}},computed:{cleandata:function(){if(this.clean&&this.facedata){var e=_.cloneDeep(this.facedata);for(var a in e.nDecorationID=0,e.tDecal){var t=this.decalDb.getDecalIsFree(a,e.tDecal[a]["nShowID"]);console.log(t),t||(e.tDecal[a]["nShowID"]=u[a]["nShowID"])}return e}return this.facedata}},mounted:function(){console.log(P[this.body_type])},methods:{checkdecal_prop:function(e){return o.origin.includes(e)}}},j=A,F=(t("ffcc"),Object(x["a"])(j,I,S,!1,null,null,null)),U=F.exports,V={name:"Facedat",props:["data","lock","tab_type"],data:function(){return{active:"eye",subActive:{mouth:"整体",eye:"整体",nose:"整体",decals:"底妆",contour:"额头",eyebrow:"整体"},body_type:"",facedata:"",visible:!1,clean:!1,version:"std",decalDb:null,decalMap:"",decorationMap:"",totalPrice:""}},components:{NewFace:T,OldFace:U},computed:{ready:function(){return!(!this.facedata||!this.decalDb.ready())},cleandata:function(){if(this.clean&&this.facedata){var e=l.a.cloneDeep(this.facedata);for(var a in e.nDecorationID=0,e.tDecal){var t=this.decalDb.getDecalIsFree(a,e.tDecal[a]["nShowID"]);t||(e.tDecal[a]["nShowID"]=u[a]["nShowID"])}return e}return this.facedata},client:function(){var e,a=null===(e=this.facedata)||void 0===e?void 0:e.nMajorVersion;return 1!=a&&a?"origin":"std"},output_std:function(){var e=this.amendVersion("std");return e.tBone=this.amendBone(e.tBone),this.clean&&(e.tDecal=l.a.cloneDeep(u)),e},output_origin:function(){var e=this.amendVersion("origin");for(var a in e.tBone=this.amendBone(e.tBone),e.tDecal)if(o.origin.includes(a))for(var t in e.tDecal[a]["nColorID"]=u[a]["nColorID"],e.tDecal[a]["nShowID"]=u[a]["nShowID"],e.tDecal[a])r.origin.includes(t)||delete e.tDecal[a][t];else delete e.tDecal[a];return e},output:function(){var e={},a="origin"==this.version?this.output_origin:this.output_std;try{e="return "+Object(b["format"])(a,{eol:"",spaces:0}).slice(6)}catch(t){console.log("导出转换失败"),console.log(t)}return e}},watch:{data:{deep:!0,handler:function(e){this.render()}},cleandata:{deep:!0,handler:function(){this.$forceUpdate()}},client:{immediate:!0,handler:function(e){var a=this.data.object;this.decalDb=new p["a"](this.client,a.bNewFace)}}},methods:{render:function(){if(!this.data)return this.body_type="",void(this.facedata="");try{var e=this.data.object;this.body_type=e.status?e.misc[0]["value"]:e.nRoleType,this.decalDb.setBodyType(this.body_type),this.facedata=e.status?Object(i["a"])(e):e,this.facedata.bNewFace||(this.totalPrice=this.decalDb.getTotalPrice(this.cleandata))}catch(a){this.facedata="",console.log(a),this.$notify.error({title:"错误",message:"脸型数据无法解析"})}},buildData:function(e){this.version=e;var a=y["a"](this.output),t=new Blob([a],{type:"application/dat;charset=utf-8"});Object(v["saveAs"])(t,Date.now()+".dat")},amendVersion:function(e){var a=l.a.cloneDeep(this.cleandata);return a.nDecorationID="origin"===e?0:a.nDecorationID,a.nMajorVersion=f[e]["nMajorVersion"],a.nVersion=f[e]["nVersion"],a},amendBone:function(e){var a=l.a.cloneDeep(d),t=Object.assign(a,e);return t},amendDecal:function(e){l.a.cloneDeep(u);for(var a in u)e[a]?e[a]=Object.assign(u[a],e[a]):e[a]=l.a.cloneDeep(u[a]);return e},checkdecal_prop:function(e){return o.origin.includes(e)},clog:function(e){console.log(e)},getNewDecal:function(e){return new_decal_type[this.facedata.nRoleType][e][this.facedata.tDecal[e]["nShowID"]]}},mounted:function(){this.render()}},$=V,W=(t("cec9"),Object(x["a"])($,c,s,!1,null,null,null));a["a"]=W.exports},ffcc:function(e,a,t){"use strict";t("01bf")}}]);
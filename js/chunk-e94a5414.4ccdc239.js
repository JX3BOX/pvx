(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e94a5414"],{1329:function(t,e,i){"use strict";i("af4d")},2768:function(t,e,i){"use strict";i("4d0d")},"4bb4":function(t,e,i){"use strict";i("5f65")},"4d0d":function(t,e,i){},"4edd":function(t,e,i){},"5f65":function(t,e,i){},7527:function(t,e,i){},"95a8":function(t,e,i){"use strict";i("7527")},af4d:function(t,e,i){},b761:function(t,e,i){"use strict";i("4edd")},e2c3:function(t,e,i){},fae7:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-price"},[e("div",{staticClass:"m-type-list"},t._l(t.list,(function(i,a){return e("div",{key:"l"+a,staticClass:"u-type-item",class:{"is-active":t.active===i.value},on:{click:function(e){return t.setActive(i.value)}}},[t._v(" "+t._s(i.label)+" ")])})),0),e("div",{staticClass:"m-body"},["goods"!=t.active?e("overview",{ref:"overviewRef",attrs:{server:t.server,active:t.active}}):t._e(),"goods"==t.active?e("goods",{ref:"goodsRef",attrs:{server:t.server}}):t._e()],1),e("div",{staticClass:"m-server",class:{"is-expanded":t.isServerSwitchExpanded},on:{click:function(e){t.isServerSwitchExpanded=!1}}},[e("div",{staticClass:"m-server-content",on:{click:function(e){e.stopPropagation(),t.isServerSwitchExpanded=!0}}},[e("div",{staticClass:"u-server-label"},[t._v("服务器")]),e("div",{staticClass:"u-server-name"},[t._v(t._s(t.server))])]),e("div",{staticClass:"m-server-switch"},[e("div",{staticClass:"u-switch-title"},[t._v("切换服务器")]),e("div",{staticClass:"u-server-list"},t._l(t.serverList,(function(i){return e("div",{key:i,staticClass:"u-server-item",on:{click:function(e){return t.serverChange(i)}}},[t._v(" "+t._s(i)+" ")])})),0)])])])},s=[],n=i("60d7"),o=i("a59a"),r=i("c9d2"),c=i("7bdf"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-price-overview-body"},[t.server?e("goldCharts",{attrs:{server:t.server,active:t.active}}):t._e(),""==t.active?e("myGoodList",{attrs:{data:t.myFollowPlan,priceMap:t.priceMap}}):t._e()],1)},d=[],u=(i("4de4"),i("d81d"),i("14d9"),i("e9f5"),i("910d"),i("7d54"),i("ab43"),i("d3b7"),i("820e"),i("3ca3"),i("159b"),i("ddb0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-price-overview-gold-charts"},[t.currentDataList.length?e("list-cross",{attrs:{list:t.currentDataList,radius:0},scopedSlots:t._u([{key:"default",fn:function(i){return[t.active||"WBL"===i.item.key?e("dataPlane",{attrs:{item:i.item}}):t._e()]}}],null,!1,460969820)}):t._e()],1)}),v=[],f=(i("13d5"),i("4e82"),i("9485"),i("b680"),i("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"u-data-plane"},[e("div",{staticClass:"plane-header"},[e("div",{staticClass:"plane-data"},[e("div",{staticClass:"data-value"},[t._v(t._s(t.item.recommend||0))]),e("div",{staticClass:"data-label"},[t._v("建议收购金价")])]),e("div",{staticClass:"plane-channel"},[t._v(t._s(t.item.name))])]),e("div",{ref:"chart",staticClass:"plane-chart"}),e("div",{staticClass:"plane-xAxis"},[e("div",{staticClass:"xAxis-item"},[e("div",{staticClass:"xAxis-value"},[t._v(t._s(t.item.beforeYesterday||0))])]),e("div",{staticClass:"xAxis-item"},[e("div",{staticClass:"xAxis-value"},[t._v(t._s(t.item.yesterday||0))])]),e("div",{staticClass:"xAxis-item"},[e("div",{staticClass:"xAxis-value"},[t._v(t._s(t.item.lastDay||0))])])])])}),m=[],h=i("313e"),p={name:"GoodsPrice",props:["item"],components:{},data:function(){return{myChart:null,isDarkModeStatus:window.matchMedia("(prefers-color-scheme: dark)").matches}},watch:{item:{handler:function(t){var e=this;t.key&&this.$nextTick((function(){e.setOption()}))},deep:!0,immediate:!0}},methods:{initChart:function(){var t=this;this.myChart=h["a"](this.$refs.chart);var e=function(){t.myChart.resize()};window.addEventListener("resize",e),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",e),t.myChart.dispose()}))},setOption:function(){if(this.myChart&&this.item.data.length){var t=this.item,e=t.beforeYesterday,i=t.yesterday,a=t.lastDay,s=[e,i,a],n=Math.min.apply(Math,s),o=Math.max.apply(Math,s);console.log(this.isDarkModeStatus),this.myChart.setOption({xAxis:{show:!1,type:"category",data:["前日","昨日","今日"],boundaryGap:!1},grid:{left:5,right:5,bottom:5,top:5},yAxis:{show:!1,type:"value",min:n,max:o},series:[{clip:!1,smooth:!0,data:s,type:"line",symbol:"none",lineStyle:{color:this.isDarkModeStatus?"#fedaa3":"#24292E",width:5,cap:"round"},silent:!0}]})}}},created:function(){},mounted:function(){this.initChart()}},g=p,y=(i("1329"),i("2877")),w=Object(y["a"])(g,f,m,!1,null,"235afa12",null),_=w.exports,C=i("015b"),b={props:{server:{type:String,default:""},active:{type:String,default:""}},components:{ListCross:C["a"],dataPlane:_},data:function(){return{goldPriceData:{},loading:!1}},computed:{currentDataList:function(){var t=this.server,e=this.goldPriceData[t],i=[];for(var a in e){var s,n,o,r,c=e[a],l=c[c.length-1].average.toFixed(2),d=(null===(s=c[c.length-2])||void 0===s||null===(n=s.average)||void 0===n?void 0:n.toFixed(2))||0,u=(null===(o=c[c.length-3])||void 0===o||null===(r=o.average)||void 0===r?void 0:r.toFixed(2))||0,v=c.reduce((function(t,e){return t+e.average}),0),f=void 0;f="DD373"===a?((+l+ +d+ +u)/.9405/3).toFixed(2):((+l+ +d+ +u)/3).toFixed(2);var m={name:"WBL"===a?"万宝楼":a,key:a,recommend:f,sum:v,lastDay:l,yesterday:d,beforeYesterday:u,data:c,isActive:this.active===a};i.push(m)}return i=i.sort((function(t,e){return e.sum-t.sum})),i}},watch:{active:{handler:function(t){this.$forceUpdate()},immediate:!0}},methods:{getData:function(){var t=this;this.loading=!0,Object(c["a"])().then((function(e){t.goldPriceData=e.data})).finally((function(){t.loading=!1}))}},mounted:function(){this.getData()}},D=b,P=(i("4bb4"),Object(y["a"])(D,u,v,!1,null,"e54e6484",null)),x=P.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-mygoods"},t._l(t.data,(function(i){var a;return e("div",{key:i.id,staticClass:"m-mygoods-plan"},[null!==(a=t.mergeData(i.relation))&&void 0!==a&&a.length?e("div",{staticClass:"m-mygoods-list"},t._l(t.mergeData(i.relation),(function(i){return e("div",{key:i.id,staticClass:"m-mygoods-list-item",on:{click:function(e){return t.goItemPage(i.id)}}},[e("img",{staticClass:"u-icon",attrs:{src:t.iconLink(i.IconID),alt:""}}),e("div",{staticClass:"m-mygoods-list-item-label"},[t._v(t._s(i.Name||""))]),e("div",{staticClass:"m-mygoods-list-item-money"},[t.priceMap[i.id]?e("GamePrice",{attrs:{price:t.priceMap[i.id]||0}}):e("div",{staticClass:"is-null"},[t._v("暂无价目")])],1)])})),0):t._e()])})),0)},S=[],k=(i("99af"),i("85e4")),F=i("1248"),G={props:{data:{},priceMap:{}},components:{GamePrice:F["a"]},methods:{iconLink:k["l"],filterSameItem:function(t){var e=[],i={};return t.forEach((function(t){i[t.id]||(e.push(t),i[t.id]=!0)})),e},mergeData:function(t){var e=[];return(null===t||void 0===t?void 0:t.length)&&t.forEach((function(t){t.data.forEach((function(t){e.push(t)}))})),e},goItemPage:function(t){var e=location.origin;sessionStorage.setItem("server_name",this.server),window.location.href="".concat(e,"/item/view/").concat(t)}}},E=G,O=(i("2768"),Object(y["a"])(E,M,S,!1,null,"02245f2c",null)),L=O.exports,j={components:{goldCharts:x,myGoodList:L},props:{server:{type:String,default:""},active:{}},data:function(){return{myFollowPlan:[],priceMap:{},systemGoodsData:[]}},computed:{client:function(){return this.$store.state.client}},watch:{server:function(){this.priceMap={},this.getServerPriceData(),this.getMyFollowGoodsPrice()}},created:function(){r["a"].isLogin()?(this.getSystemGoodsData(),this.getMyFollowList()):this.getSystemGoodsData()},methods:{getSystemGoodsData:function(){var t=this;Object(c["e"])({client:this.client}).then((function(e){t.systemGoodsData=e.data.data,t.getServerPriceData()}))},getMyFollowList:function(){var t=this;this.loading=!0,Object(c["b"])().then((function(e){e.data.data?t.myFollowData=e.data.data.split(",").map((function(t){return+t})).filter((function(t){return!!t})):t.myFollowData=[];var i=[];t.myFollowData.forEach((function(e){var a=t.getPlan(e);i.push(a)})),Promise.allSettled(i).then((function(e){t.loading=!1,t.myFollowPlan=(e||[]).filter((function(t){return"fulfilled"===t.status})).map((function(t){return t.value})),t.getMyFollowGoodsPrice()}))}))},getServerPriceData:function(){var t=this,e=[];this.systemGoodsData.forEach((function(t){t.items.forEach((function(t){e.push(t.item_id)}))})),Object(c["d"])({item_ids:e,server:this.server,aggregate_type:"hourly"}).then((function(e){var i=e.data;t.priceMap={},i.forEach((function(e){t.priceMap[e.item_id]=e.price}))}))},getPlan:function(t){return new Promise((function(e,i){Object(c["c"])(t).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))},getMyFollowGoodsPrice:function(){var t,e=this,i=[],a={};(null===(t=this.myFollowPlan)||void 0===t?void 0:t.length)&&this.myFollowPlan.forEach((function(t){null===t||void 0===t||t.relation.forEach((function(t){null===t||void 0===t||t.data.forEach((function(t){var s=t.id;void 0==e.priceMap[s]&&void 0==a[s]&&(i.push(s),a[s]=!0)}))}))}))}}},A=j,I=Object(y["a"])(A,l,d,!1,null,null,null),N=I.exports,$=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-price-goods"},[e("div",{staticClass:"m-search-box"},[e("svg",{class:"m-search-icon",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M19.6 21l-6.3-6.3A6.096 6.096 0 019.5 16c-1.817 0-3.354-.63-4.612-1.888C3.63 12.853 3.001 11.316 3 9.5c0-1.816.629-3.353 1.888-4.612C6.148 3.629 7.685 3 9.5 3s3.353.63 4.613 1.888C15.373 6.147 16.002 7.684 16 9.5a6.096 6.096 0 01-1.3 3.8l6.3 6.3-1.4 1.4zM9.5 14c1.25 0 2.313-.437 3.188-1.312S14.001 10.751 14 9.5c0-1.25-.438-2.313-1.312-3.187C11.814 5.439 10.751 5.001 9.5 5c-1.251-.001-2.314.436-3.187 1.313C5.44 7.19 5.002 8.252 5 9.5c-.002 1.248.436 2.31 1.313 3.188.877.877 1.94 1.315 3.187 1.312z"}})]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],staticClass:"m-search-field",attrs:{type:"text",placeholder:"你想要搜索什么？"},domProps:{value:t.keywords},on:{input:function(e){e.target.composing||(t.keywords=e.target.value)}}})]),e("systemGoodList",{attrs:{data:t.systemGoodsDataFilter,priceMap:t.priceMap}})],1)},J=[],z=(i("a732"),i("e9c4"),i("b64b"),i("5087"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-systemgoods"},[e("el-collapse",{staticClass:"m-systemgoods-group"},t._l(t.data,(function(i){return e("el-collapse-item",{key:i.id,staticClass:"m-systemgoods-list",attrs:{title:i.label,name:i.id}},t._l(t.filterSameItem(i.items),(function(i){return e("div",{key:i.item_id,staticClass:"m-systemgoods-list-item",on:{click:function(e){return t.goItemPage(i.item_id)}}},[e("img",{staticClass:"u-icon",attrs:{src:t.iconLink(i.icon),alt:""}}),e("div",{staticClass:"m-systemgoods-list-item-label"},[t._v(t._s(i.label||""))]),e("div",{staticClass:"m-systemgoods-list-item-money"},[t.priceMap[i.item_id]?e("GamePrice",{attrs:{price:t.priceMap[i.item_id]}}):e("div",{staticClass:"is-null"},[t._v("暂无价目")])],1)])})),0)})),1)],1)}),B=[],Y={props:{data:{},priceMap:{}},components:{GamePrice:F["a"]},methods:{iconLink:k["l"],filterSameItem:function(t){var e=[],i={};return t.forEach((function(t){i[t.item_id]||(e.push(t),i[t.item_id]=!0)})),e},goItemPage:function(t){var e=location.origin;sessionStorage.setItem("server_name",this.server),window.location.href="".concat(e,"/item/view/").concat(t)}}},R=Y,T=(i("95a8"),Object(y["a"])(R,z,B,!1,null,"2c71addb",null)),W=T.exports,U={props:{server:{}},components:{systemGoodList:W},data:function(){return{systemGoodsData:[],priceMap:{},myFollowData:[],myFollowPlan:[],loading:!1,keywords:""}},watch:{server:function(){this.getServerPriceData(),this.getMyFollowGoodsPrice()}},computed:{client:function(){return this.$store.state.client},myFollowPlanFilter:function(){var t=this,e=JSON.parse(JSON.stringify(this.myFollowPlan));return this.keywords&&e.forEach((function(e){e.relation.forEach((function(e){e.data=e.data.filter((function(e){return e.Name&&e.Name.indexOf(t.keywords)>-1}))}))})),e=e.filter((function(t){return t.relation.some((function(t){return t.data.length>0}))})),e},systemGoodsDataFilter:function(){var t=this,e=JSON.parse(JSON.stringify(this.systemGoodsData));return this.keywords&&e.forEach((function(e){e.items=e.items.filter((function(e){return e.label&&e.label.indexOf(t.keywords)>-1}))})),e=e.filter((function(t){return t.items.length>0})),e}},methods:{getSystemGoodsData:function(){var t=this;Object(c["e"])({client:this.client}).then((function(e){t.systemGoodsData=e.data.data,t.getServerPriceData()}))},getServerPriceData:function(){var t=this,e=[];this.systemGoodsData.forEach((function(t){t.items.forEach((function(t){e.push(t.item_id)}))})),this.loading=!0,Object(c["d"])({item_ids:e,server:this.server,aggregate_type:"hourly"}).then((function(e){var i=e.data;t.priceMap={},i.forEach((function(e){t.priceMap[e.item_id]=e.price}))})).finally((function(){t.loading=!1}))},getMyFollowList:function(){var t=this;this.loading=!0,Object(c["b"])().then((function(e){e.data.data?t.myFollowData=e.data.data.split(",").map((function(t){return+t})).filter((function(t){return!!t})):t.myFollowData=[];var i=[];t.myFollowData.forEach((function(e){var a=t.getPlan(e);i.push(a)})),Promise.allSettled(i).then((function(e){t.loading=!1,t.myFollowPlan=(e||[]).filter((function(t){return"fulfilled"===t.status})).map((function(t){return t.value})),t.getMyFollowGoodsPrice()}))}))},getPlan:function(t){return new Promise((function(e,i){Object(c["c"])(t).then((function(t){e(t.data.data)})).catch((function(t){i(t)}))}))},getMyFollowGoodsPrice:function(){var t=this,e=[],i={};this.myFollowPlan.forEach((function(a){a.relation.forEach((function(a){a.data.forEach((function(a){var s=a.id;void 0==t.priceMap[s]&&void 0==i[s]&&(e.push(s),i[s]=!0)}))}))}))},updatePrice:function(){this.getServerPriceData(),this.getMyFollowGoodsPrice()}},mounted:function(){this.getSystemGoodsData(),r["a"].isLogin()&&this.getMyFollowList()}},q=U,H=(i("b761"),Object(y["a"])(q,$,J,!1,null,null,null)),K=H.exports,Q={components:{overview:N,goods:K},data:function(){return{list:[{label:"总览",value:""},{label:"金价",value:"gold"},{label:"物价",value:"goods"}],active:"",server:"",isServerSwitchExpanded:!1}},computed:{client:function(){return this.$store.state.client},serverList:function(){return"std"==this.client?n:o}},created:function(){var t=this;r["a"].isLogin()&&"std"==this.client?Object(c["f"])().then((function(e){var i,a;t.server=(null===(i=e.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.jx3_server)||"梦江南"})):this.server="std"==this.client?"梦江南":"缘起稻香"},methods:{serverChange:function(t){this.server=t},setActive:function(t){this.active=t,document.documentElement.scrollTop=0}}},V=Q,X=(i("fd97"),Object(y["a"])(V,a,s,!1,null,null,null));e["default"]=X.exports},fd97:function(t,e,i){"use strict";i("e2c3")}}]);
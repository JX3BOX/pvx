(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88b64582"],{3813:function(t,e,s){},"61a9":function(t,e,s){"use strict";s("3813")},bc63:function(t,e,s){"use strict";s.r(e);s("99af"),s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-body"},[e("a",{staticClass:"u-go_back",attrs:{href:"/adventure"}},[t._v("返回主页")]),t.isLogin?t.noRole?[e("div",{staticClass:"u-bind_role"},[e("el-empty",{attrs:{description:"当前暂未绑定角色",image:t.__imgPath+"/img/common/empty.png","image-size":200}},[e("a",{staticClass:"el-button el-button--primary",attrs:{href:"/team/role/bind"}},[t._v("前往绑定 "),e("i",{staticClass:"el-icon-arrow-right"})])])],1)]:[e("div",{staticClass:"m-related-roles"},[e("el-select",{attrs:{"value-key":"ID",placeholder:"请选择当前角色",disabled:!t.isLogin,"popper-class":"m-related-roles-options",size:"small"},model:{value:t.currentRole,callback:function(e){t.currentRole=e},expression:"currentRole"}},t._l(t.roleList,(function(s){return e("el-option",{key:s.ID,attrs:{value:s,label:s.name}},[e("span",{staticClass:"u-role"},[e("span",{staticClass:"u-role-name"},[e("img",{staticClass:"u-role-icon",attrs:{src:t.showSchoolIcon(s.mount)}}),t._v(t._s(s.name))]),e("span",{staticClass:"u-role-server"},[t._v(t._s(s.server))])])])})),1),e("el-select",{attrs:{placeholder:"请选择阵营","popper-class":"m-related-roles-options",size:"small"},model:{value:t.currentCamp,callback:function(e){t.currentCamp=e},expression:"currentCamp"}},[e("el-option",{attrs:{value:"hq",label:"浩气盟阵营"}}),e("el-option",{attrs:{value:"er",label:"恶人谷阵营"}})],1)],1),e("div",{ref:"capture",attrs:{id:"capture"}},[t.userAchievement?e("div",{staticClass:"m-content",class:{start:t.addClass,over:t.isOver},style:{zoom:t.contentZoom}},[e("img",{staticClass:"u-content__bg",attrs:{src:t.getCdnImgUrl("content_bg.png")}}),e("div",{staticClass:"m-left",class:t.reelAddClass},[e("img",{staticClass:"u-left__img",attrs:{src:t.getCdnImgUrl("landscape/left.png")}})]),e("div",{staticClass:"m-right",class:t.reelAddClass},[e("img",{staticClass:"u-right__img",attrs:{src:t.getCdnImgUrl("landscape/right.png")}})]),e("div",{staticClass:"m-qy-box"},[e("div",{staticClass:"m-qy m-ordinary"},[t.userAchievement.normal.length?e("div",{staticClass:"m-qy-list"},t._l(t.userAchievement.normal,(function(s,a){return e("div",{key:a,staticClass:"m-qy__row"},t._l(s,(function(s,a){return e("div",{key:a,staticClass:"m-qy__item"},[[4,118].indexOf(s.dwID)>-1?[e("img",{directives:[{name:"show",rawName:"v-show",value:"hq"==t.currentCamp,expression:"currentCamp == 'hq'"}],staticClass:"u-qy__img",attrs:{src:t.getCdnImgUrl("pt/".concat(s.dwID,"_hq.png"))}}),e("img",{directives:[{name:"show",rawName:"v-show",value:"er"==t.currentCamp,expression:"currentCamp == 'er'"}],staticClass:"u-qy__img",attrs:{src:t.getCdnImgUrl("pt/".concat(s.dwID,"_er.png"))}})]:e("el-image",{staticClass:"u-qy__img",attrs:{src:t.getCdnImgUrl("pt/".concat(s.dwID,".png"))}},[e("el-image",{staticClass:"u-qy__img",attrs:{slot:"error",src:t.getCdnImgUrl("pt/default.png")},slot:"error"})],1),e("div",{staticClass:"m-qy__text"},[e("img",{staticClass:"u-qy__bg",attrs:{src:t.getCdnImgUrl("pt/text_bg.png")}}),e("span",{staticClass:"u-qy__text"},[t._v(t._s(s.szName))])])],2)})),0)})),0):e("div",{staticClass:"u-no-qy"},[e("img",{attrs:{src:t.getCdnImgUrl("landscape/no_qy.png")}})]),e("div",{staticClass:"m-qy-count"},[e("img",{staticClass:"u-count__img",attrs:{src:t.getCdnImgUrl("landscape/pt_qy_bg.png")}}),e("div",{staticClass:"m-count-info"},[e("div",[t._v(t._s(t.userAchievement.normalNowNum))]),e("div",[t._v("/")]),e("div",[t._v(t._s(t.userAchievement.normalAllNum))])])])]),e("div",{staticClass:"m-qy m-pet"},[t.userAchievement.pet.length?e("div",{staticClass:"m-qy-list"},t._l(t.userAchievement.pet,(function(s,a){return e("div",{key:a,staticClass:"m-qy__row"},t._l(s,(function(s,a){return e("div",{key:a,staticClass:"m-qy__item"},[e("img",{staticClass:"u-qy__img",attrs:{src:t.getImgUrl(s)}}),e("img",{staticClass:"u-qy__border",attrs:{src:t.getCdnImgUrl("pet_img_border.png")}})])})),0)})),0):e("div",{staticClass:"u-no-qy"},[e("img",{attrs:{src:t.getCdnImgUrl("landscape/no_qy.png")}})]),e("div",{staticClass:"m-qy-count"},[e("img",{staticClass:"u-count__img",attrs:{src:t.getCdnImgUrl("landscape/pet_qy_bg.png")}}),e("div",{staticClass:"m-count-info"},[e("div",[t._v(t._s(t.userAchievement.petNowNum))]),e("div",[t._v("/")]),e("div",[t._v(t._s(t.userAchievement.petAllNum))])])])])]),e("div",{staticClass:"m-world"},[e("img",{staticClass:"u-world__bg",attrs:{src:t.getCdnImgUrl("world/world_bg.svg")}}),e("div",{staticClass:"m-world-count"},[e("img",{staticClass:"u-count__img",attrs:{src:t.getCdnImgUrl("landscape/world_qy_bg.png")}}),e("div",{staticClass:"m-count-info"},[e("div",[t._v(t._s(t.userAchievement.perfectNowNum))]),e("div",[t._v("/")]),e("div",[t._v(t._s(t.userAchievement.perfectAllNum))])])]),t._l(t.userAchievement.perfect,(function(s,a){return e("div",{key:a,staticClass:"m-world-item",class:s.hasClass,style:{zIndex:s.zIndex}},[e("img",{staticClass:"u-item__img",attrs:{src:t.getCdnImgUrl("world/".concat(s.dwID).concat(s.isAct?"_act":"",".png"))}}),e("div",{staticClass:"m-item__text"},[e("img",{staticClass:"u-item__bg",attrs:{src:t.getCdnImgUrl("world/text_bg".concat(s.isAct?"_act":"",".png"))}}),e("span",{staticClass:"u-item__text"},[t._v(t._s(s.szName))])])])}))],2),e("div",{staticClass:"m-title"},[e("img",{staticClass:"u-logo",attrs:{src:t.getCdnImgUrl("landscape/title_icon.png")}}),e("div",{staticClass:"m-title-info"},[e("img",{staticClass:"m-tip",attrs:{src:t.getCdnImgUrl("poetry_lan.png")}}),e("div",{staticClass:"m-user"},[e("img",{staticClass:"u-icon",attrs:{src:t.showSchoolIcon(t.roleInfo.mount)}}),e("span",{staticClass:"u-name"},[t._v(t._s(t.roleInfo.name))])])])]),e("div",{staticClass:"m-producer"},[e("img",{staticClass:"u-producer",attrs:{src:t.getCdnImgUrl("producer.png")}}),e("div",{staticClass:"u-producer__text"},[t._v("*剑网3魔盒提供技术支持，茗伊插件提供数据支持。")])]),e("div",{staticClass:"m-qy-progress"},[e("div",{staticClass:"u-progress"},[t._v("【奇遇进度】"+t._s(t.userAchievement.progress)+"%")]),e("div",{staticClass:"u-time"},[t._v("【记录时间】"+t._s(t.userAchievement.updated_at))])])]):t._e()]),e("div",{staticClass:"m-treasure-footer"},[e("a",{staticClass:"u-btn m-hide el-button el-button--primary",attrs:{href:"/tool/74559",target:"_blank"}},[t._v("同步数据")]),t.isOver?e("button",{staticClass:"u-btn m-hide el-button el-button--primary",on:{click:t.saveAsImage}},[t._v(" 保存图片 ")]):t._e()])]:[e("div",{staticClass:"u-bind_role"},[e("el-empty",{attrs:{description:"您还没有登录",image:t.__imgPath+"/img/common/empty.png","image-size":200}},[e("a",{staticClass:"el-button el-button--primary",attrs:{href:t.login_url}},[t._v("前往登录 "),e("i",{staticClass:"el-icon-arrow-right"})])])],1)]],2)},n=[],i=s("c7eb"),r=s("1da1"),c=s("5530"),l=(s("4de4"),s("14d9"),s("fb6a"),s("e9f5"),s("910d"),s("d3b7"),s("ac1f"),s("5319"),s("987d")),o=s("85e4"),d=s("42e9"),m=s("c9d2"),u=s("c0e9"),g=s.n(u),_=s("65c2"),p={name:"landscape",inject:["__imgRoot","__imgPath"],data:function(){return{addClass:!1,reelAddClass:!1,contentZoom:"",userAchievement:!1,roleList:[],noRole:!1,currentRole:"",currentCamp:"hq",roleInfo:{},isLogin:m["a"].isLogin(),virtualRole:Object(c["a"])(Object(c["a"])({},m["a"].getInfo()),{},{jx3id:0,ID:~~m["a"].getInfo().uid}),isSync:!1,isOver:!1,login_url:_["__Links"].account.login+"?redirect="+location.href}},computed:{client:function(){return this.$store.state.client}},watch:{currentRole:{deep:!0,handler:function(t){this.roleInfo=t,t.jx3id&&this.loadRole(t.jx3id)}},virtualRole:{immediate:!0,deep:!0,handler:function(t){this.currentRole=t}}},mounted:function(){var t=this,e=window.innerWidth<768;e?this.$router.push({name:"portrait"}):Object(l["d"])().then((function(e){var s,a;e.data.data.list.length?(t.noRole=!1,t.roleList=(null===(s=e.data)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.list.filter((function(t){return!!t.player_id})))||[],t.roleList.length&&(t.currentRole=t.roleList[0])):(t.noRole=!0,t.$message.error("未获取到角色信息"))}))},methods:{saveAsImage:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var s,a,n,r,c;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=t.contentZoom,t.contentZoom=1,e.next=5,new Promise((function(e){t.$nextTick((function(){e()}))}));case 5:return a=t.$refs.capture,e.next=8,g()(a,{allowTaint:!0,useCORS:!0,width:a.offsetWidth,height:a.offsetHeight});case 8:n=e.sent,t.contentZoom=s,r=n.toDataURL("image/png"),c=document.createElement("a"),c.href=r,c.download="downloaded-image.png",c.click(),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),console.error("Error saving image:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},loadRole:function(t){var e=this;Object(d["a"])(t).then((function(s){e.isSync=!!t,s.pet=e.splitArrayIntoChunks(s.pet,5),s.normal=e.splitArrayIntoChunks(s.normal,3),e.userAchievement=s,e.$nextTick((function(t){e.addClass=!1,e.reelAddClass="",e.isOver=!1,setTimeout((function(){e.start()}),500)}))}))},start:function(){var t=this;this.addClass=!0,this.reelAddClass="start",setTimeout((function(){t.isOver=!0,t.addClass=!1,t.reelAddClass=""}),3e3),window.addEventListener("resize",this.handleScreenWidthChange),window.addEventListener("load",this.handleScreenWidthChange),this.handleScreenWidthChange()},isVirtual:function(){var t;return!(null!==(t=this.currentRole)&&void 0!==t&&t.jx3id)},getImgUrl:function(t){var e,s="std",a=null===(e=t.szOpenRewardPath)||void 0===e?void 0:e.toLowerCase();if(!a)return"";if(a=a.replace(/\\/g,"/").replace("ui/image/adventure/",""),!t.szRewardType){var n=a.replace(/\.tga$/,".png");return"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(n)}return a=a.replace(/\/[^\/]+?\.tga$/,""),"camp"===t.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(a,"/camp_").concat(this.camp,"_open.png"):"school"===t.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(a,"/school_").concat(this.force,"_open.png"):defaultImg},handleScreenWidthChange:function(){var t=window.innerWidth-80,e=1920,s=t/e,a=1;t<=e&&(a=s),this.contentZoom=a},splitArrayIntoChunks:function(t,e){for(var s=[],a=0;a<t.length;a+=e)s.push(t.slice(a,a+e));return s},showSchoolIcon:o["s"],getCdnImgUrl:function(t){return"".concat(_["__cdn"],"design/treasure/").concat(t)}}},v=p,C=(s("61a9"),s("2877")),h=Object(C["a"])(v,a,n,!1,null,null,null);e["default"]=h.exports}}]);
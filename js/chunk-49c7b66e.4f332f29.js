(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49c7b66e"],{"12a6":function(t,e,s){},3835:function(t,e,s){"use strict";function a(t){if(Array.isArray(t))return t}s.d(e,"a",(function(){return c}));s("a4d3"),s("e01a"),s("d28b"),s("14d9"),s("d3b7"),s("3ca3"),s("ddb0");function n(t,e){var s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var a,n,r,i,c=[],o=!0,l=!1;try{if(r=(s=s.call(t)).next,0===e){if(Object(s)!==s)return;o=!1}else for(;!(o=(a=r.call(s)).done)&&(c.push(a.value),c.length!==e);o=!0);}catch(t){l=!0,n=t}finally{try{if(!o&&null!=s["return"]&&(i=s["return"](),Object(i)!==i))return}finally{if(l)throw n}}return c}}var r=s("06c5");s("d9e2");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return a(t)||n(t,e)||Object(r["a"])(t,e)||i()}},"40cc":function(t,e,s){"use strict";s("919b")},"5c7a":function(t,e,s){"use strict";s("12a6")},6893:function(t,e,s){"use strict";s("99af"),s("b0c0");var a=function(){var t=this,e=t._self._c;return t.userAchievement?e("div",{staticClass:"m-content",class:{start:t.addClass,over:t.isOver},style:{zoom:t.contentZoom}},[e("img",{staticClass:"u-content__bg",attrs:{src:t.getCdnImgUrl("content_bg.png")}}),e("div",{staticClass:"m-left",class:t.reelAddClass},[e("img",{staticClass:"u-left__img",attrs:{src:t.getCdnImgUrl("landscape/left.png")}})]),e("div",{staticClass:"m-right",class:t.reelAddClass},[e("img",{staticClass:"u-right__img",attrs:{src:t.getCdnImgUrl("landscape/right.png")}})]),e("div",{staticClass:"m-qy-box"},[e("div",{staticClass:"m-qy m-ordinary"},[t.userAchievement.normal.length?e("div",{staticClass:"m-qy-list"},t._l(t.userAchievement.normal,(function(s,a){return e("div",{key:a,staticClass:"m-qy__row"},t._l(s,(function(s,a){return e("div",{key:a,staticClass:"m-qy__item"},[[4,118].indexOf(s.dwID)>-1?[e("img",{directives:[{name:"show",rawName:"v-show",value:"hq"==t.currentCamp,expression:"currentCamp == 'hq'"}],staticClass:"u-qy__img",attrs:{src:t.getCdnImgUrl("pt/".concat(s.dwID,"_hq.png"))}}),e("img",{directives:[{name:"show",rawName:"v-show",value:"er"==t.currentCamp,expression:"currentCamp == 'er'"}],staticClass:"u-qy__img",attrs:{src:t.getCdnImgUrl("pt/".concat(s.dwID,"_er.png"))}}),e("img",{directives:[{name:"show",rawName:"v-show",value:!t.currentCamp,expression:"!currentCamp"}],staticClass:"u-qy__img",attrs:{src:t.getCdnImgUrl("pt/".concat(s.dwID,".png"))}})]:e("el-image",{staticClass:"u-qy__img",attrs:{src:t.getCdnImgUrl("pt/".concat(s.dwID,".png"))}},[e("el-image",{staticClass:"u-qy__img",attrs:{slot:"error",src:t.getCdnImgUrl("pt/default.png")},slot:"error"})],1),e("div",{staticClass:"m-qy__text"},[e("img",{staticClass:"u-qy__bg",attrs:{src:t.getCdnImgUrl("pt/text_bg.png")}}),e("span",{staticClass:"u-qy__text"},[t._v(t._s(s.szName))])])],2)})),0)})),0):e("div",{staticClass:"u-no-qy"},[e("img",{attrs:{src:t.getCdnImgUrl("landscape/no_qy.png")}})]),e("div",{staticClass:"m-qy-count"},[e("img",{staticClass:"u-count__img",attrs:{src:t.getCdnImgUrl("landscape/pt_qy_bg.png")}}),e("div",{staticClass:"m-count-info"},[e("div",[t._v(t._s(t.userAchievement.normalNowNum))]),e("div",[t._v("/")]),e("div",[t._v(t._s(t.userAchievement.normalAllNum))])])])]),e("div",{staticClass:"m-qy m-pet"},[t.userAchievement.pet.length?e("div",{staticClass:"m-qy-list"},t._l(t.userAchievement.pet,(function(s,a){return e("div",{key:a,staticClass:"m-qy__row"},t._l(s,(function(s,a){return e("div",{key:a,staticClass:"m-qy__item"},[e("img",{staticClass:"u-qy__img",attrs:{src:t.getImgUrl(s)}}),e("img",{staticClass:"u-qy__border",attrs:{src:t.getCdnImgUrl("pet_img_border.png")}})])})),0)})),0):e("div",{staticClass:"u-no-qy"},[e("img",{attrs:{src:t.getCdnImgUrl("landscape/no_qy.png")}})]),e("div",{staticClass:"m-qy-count"},[e("img",{staticClass:"u-count__img",attrs:{src:t.getCdnImgUrl("landscape/pet_qy_bg.png")}}),e("div",{staticClass:"m-count-info"},[e("div",[t._v(t._s(t.userAchievement.petNowNum))]),e("div",[t._v("/")]),e("div",[t._v(t._s(t.userAchievement.petAllNum))])])])])]),e("div",{staticClass:"m-world"},[e("img",{staticClass:"u-world__bg",attrs:{src:t.getCdnImgUrl("world/world_bg.svg")}}),e("div",{staticClass:"m-world-count"},[e("img",{staticClass:"u-count__img",attrs:{src:t.getCdnImgUrl("landscape/world_qy_bg.png")}}),e("div",{staticClass:"m-count-info"},[e("div",[t._v(t._s(t.userAchievement.perfectNowNum))]),e("div",[t._v("/")]),e("div",[t._v(t._s(t.userAchievement.perfectAllNum))])])]),t._l(t.userAchievement.perfect,(function(s,a){return[e("img",{key:"img-".concat(s.dwID,"-").concat(a),staticClass:"u-item__img",class:s.hasClass,style:{zIndex:s.zIndex},attrs:{src:t.getCdnImgUrl("world/".concat(s.dwID).concat(s.isAct?"_act":"",".png"))}}),e("div",{key:"text-".concat(s.dwID,"-").concat(a),staticClass:"m-item__text",class:s.hasClass},[e("img",{staticClass:"u-item__bg",attrs:{src:t.getCdnImgUrl("world/text_bg".concat(s.isAct?"_act":"",".png"))}}),e("span",{staticClass:"u-item__text"},[t._v(t._s(s.szName))])])]}))],2),e("div",{staticClass:"m-title"},[e("img",{staticClass:"u-logo",attrs:{src:t.getCdnImgUrl("landscape/title_icon.png")}}),e("div",{staticClass:"m-title-info"},[e("img",{staticClass:"m-tip",attrs:{src:t.getCdnImgUrl("poetry_lan.png")}}),e("div",{staticClass:"m-user"},[t.roleInfo.mount?e("img",{staticClass:"u-icon",attrs:{src:t.showSchoolIcon(t.roleInfo.mount)}}):t._e(),e("span",{staticClass:"u-name"},[t._v(t._s(t.roleInfo.name))])])])]),e("div",{staticClass:"m-producer"},[e("img",{staticClass:"u-producer",attrs:{src:t.getCdnImgUrl("producer.png")}}),e("div",{staticClass:"u-producer__text"},[t._v("*剑网3魔盒提供技术支持，茗伊插件提供数据支持。")])]),e("div",{staticClass:"m-qy-progress"},[e("div",{staticClass:"u-progress"},[t._v("【奇遇进度】"+t._s(t.userAchievement.progress)+"%")]),e("div",{staticClass:"u-time"},[t._v("【记录时间】"+t._s(t.userAchievement.updated_at))])])]):t._e()},n=[],r=(s("a9e3"),s("ac1f"),s("5319"),s("85e4")),i=s("01ea"),c={name:"landscapeContent",props:{userAchievement:{type:[Object,Boolean],default:function(){}},roleInfo:{type:Object,default:function(){}},__imgRoot:{type:String,required:!0},addClass:{type:Boolean,default:!1},isOver:{type:Boolean,default:!1},contentZoom:{type:[Number,String],default:""},currentCamp:{type:String,default:"hq"},reelAddClass:{type:[Boolean,String],default:!1}},data:function(){return{}},methods:{showSchoolIcon:r["t"],getCdnImgUrl:function(t){return"".concat(i["__cdn"],"design/treasure/").concat(t)},getImgUrl:function(t){var e,s="std",a=null===(e=t.szOpenRewardPath)||void 0===e?void 0:e.toLowerCase();if(!a)return"";if(a=a.replace(/\\/g,"/").replace("ui/image/adventure/",""),!t.szRewardType){var n=a.replace(/\.tga$/,".png");return"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(n)}return a=a.replace(/\/[^\/]+?\.tga$/,""),"camp"===t.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(a,"/camp_").concat(this.camp,"_open.png"):"school"===t.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(a,"/school_").concat(this.force,"_open.png"):defaultImg}}},o=c,l=(s("40cc"),s("2877")),u=Object(l["a"])(o,a,n,!1,null,null,null);e["a"]=u.exports},"919b":function(t,e,s){},bc63:function(t,e,s){"use strict";s.r(e);s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-body"},[e("a",{staticClass:"u-go_back",attrs:{href:"/adventure"}},[t._v("返回主页")]),t.isLogin?t.noRole?[e("div",{staticClass:"u-bind_role"},[e("el-empty",{attrs:{description:"当前暂未绑定角色",image:t.__imgPath+"/img/common/empty.png","image-size":200}},[e("a",{staticClass:"el-button el-button--primary",attrs:{href:"/team/role/bind"}},[t._v("前往绑定 "),e("i",{staticClass:"el-icon-arrow-right"})])])],1)]:[e("div",{staticClass:"m-related-roles"},[e("el-select",{attrs:{"value-key":"ID",placeholder:"请选择当前角色",disabled:!t.isLogin,"popper-class":"m-related-roles-options",size:"small"},model:{value:t.currentRole,callback:function(e){t.currentRole=e},expression:"currentRole"}},t._l(t.roleList,(function(s){return e("el-option",{key:s.ID,attrs:{value:s,label:s.name}},[e("span",{staticClass:"u-role"},[e("span",{staticClass:"u-role-name"},[e("img",{staticClass:"u-role-icon",attrs:{src:t.showSchoolIcon(s.mount)}}),t._v(t._s(s.name))]),e("span",{staticClass:"u-role-server"},[t._v(t._s(s.server))])])])})),1),e("el-select",{attrs:{placeholder:"请选择阵营","popper-class":"m-related-roles-options",size:"small"},model:{value:t.currentCamp,callback:function(e){t.currentCamp=e},expression:"currentCamp"}},[e("el-option",{attrs:{value:"hq",label:"浩气盟阵营"}}),e("el-option",{attrs:{value:"er",label:"恶人谷阵营"}})],1),e("el-tooltip",{attrs:{content:"刷新QQ机器人等渠道快照图片"}},[e("el-button",{staticClass:"u-refresh",on:{click:t.onRefresh}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" 刷新卷轴 ")])],1),e("el-button",{staticClass:"u-role-setting",on:{click:t.onRoleSet}},[e("i",{staticClass:"el-icon-setting"}),t._v(" 角色管理 ")])],1),e("div",{ref:"capture",attrs:{id:"capture"}},[e("landscapeContent",{attrs:{"__img-root":t.__imgRoot,"user-achievement":t.userAchievement,"role-info":t.roleInfo,"add-class":t.addClass,"is-over":t.isOver,"content-zoom":t.contentZoom,"current-camp":t.currentCamp,"reel-add-class":t.reelAddClass}})],1),e("div",{staticClass:"m-treasure-footer"},[e("a",{staticClass:"u-btn m-hide el-button el-button--primary",attrs:{href:"/tool/74559",target:"_blank"}},[t._v("同步数据")]),t.isOver?e("button",{staticClass:"u-btn m-hide el-button el-button--primary",on:{click:t.saveAsImage}},[t._v(" 保存图片 ")]):t._e()])]:[e("div",{staticClass:"u-bind_role"},[e("el-empty",{attrs:{description:"您还没有登录",image:t.__imgPath+"/img/common/empty.png","image-size":200}},[e("a",{staticClass:"el-button el-button--primary",attrs:{href:t.login_url}},[t._v("前往登录 "),e("i",{staticClass:"el-icon-arrow-right"})])])],1)]],2)},n=[],r=s("c14f"),i=s("1da1"),c=s("5530"),o=(s("99af"),s("4de4"),s("7db0"),s("14d9"),s("fb6a"),s("e9f5"),s("910d"),s("f665"),s("d3b7"),s("ac1f"),s("5319"),s("987d")),l=s("85e4"),u=s("42e9"),d=s("c9d2"),m=s("c0e9"),g=s.n(m),p=s("01ea"),_=s("6893"),v={name:"landscape",inject:["__imgRoot","__imgPath"],components:{landscapeContent:_["a"]},data:function(){return{addClass:!1,reelAddClass:!1,contentZoom:"",userAchievement:!1,roleList:[],noRole:!1,currentRole:"",currentCamp:"",roleInfo:{},isLogin:d["a"].isLogin(),virtualRole:Object(c["a"])(Object(c["a"])({},d["a"].getInfo()),{},{jx3id:0,ID:~~d["a"].getInfo().uid}),isSync:!1,isOver:!1,login_url:p["__Links"].account.login+"?redirect="+location.href}},computed:{client:function(){return this.$store.state.client}},watch:{currentRole:{deep:!0,handler:function(t){this.roleInfo=t,t.jx3id&&this.loadRole(t.jx3id)}},virtualRole:{immediate:!0,deep:!0,handler:function(t){this.currentRole=t}}},mounted:function(){var t=this,e=window.innerWidth<768;e?this.$router.push({name:"portrait"}):Object(o["e"])().then((function(e){var s,a;e.data.data.list.length?(t.noRole=!1,t.roleList=(null===(s=e.data)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.list.filter((function(t){return!!t.player_id})))||[],t.roleList.length&&(t.currentRole=t.roleList.find((function(t){return t.is_default_role}))||t.roleList[0])):(t.noRole=!0,t.$message.error("未获取到角色信息"))}))},methods:{onRoleSet:function(){window.open("".concat(p["__Root"],"dashboard/role"),"_blank")},onRefresh:function(){var t=this;Object(o["f"])({mode:"landscape",role:this.currentRole.name,server:this.currentRole.server}).then((function(){t.$message.success("刷新卷轴成功")}))},saveAsImage:function(){var t=this;return Object(i["a"])(Object(r["a"])().m((function e(){var s,a,n,i,c,o;return Object(r["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,s=t.contentZoom,t.contentZoom=1,e.n=1,new Promise((function(e){t.$nextTick((function(){e()}))}));case 1:return a=t.$refs.capture,e.n=2,g()(a,{allowTaint:!0,useCORS:!0,width:a.offsetWidth,height:a.offsetHeight});case 2:n=e.v,t.contentZoom=s,i=n.toDataURL("image/png"),c=document.createElement("a"),c.href=i,c.download="downloaded-image.png",c.click(),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Error saving image:",o);case 4:return e.a(2)}}),e,null,[[0,3]])})))()},loadRole:function(t){var e=this;Object(u["a"])(t).then((function(s){e.isSync=!!t,s.pet=e.splitArrayIntoChunks(s.pet,5),s.normal=e.splitArrayIntoChunks(s.normal,3),e.userAchievement=s,e.$nextTick((function(t){e.addClass=!1,e.reelAddClass="",e.isOver=!1,setTimeout((function(){e.start()}),500)}))}))},start:function(){var t=this;this.addClass=!0,this.reelAddClass="start",setTimeout((function(){t.isOver=!0,t.addClass=!1,t.reelAddClass=""}),3e3),window.addEventListener("resize",this.handleScreenWidthChange),window.addEventListener("load",this.handleScreenWidthChange),this.handleScreenWidthChange()},isVirtual:function(){var t;return!(null!==(t=this.currentRole)&&void 0!==t&&t.jx3id)},getImgUrl:function(t){var e,s="std",a=null===(e=t.szOpenRewardPath)||void 0===e?void 0:e.toLowerCase();if(!a)return"";if(a=a.replace(/\\/g,"/").replace("ui/image/adventure/",""),!t.szRewardType){var n=a.replace(/\.tga$/,".png");return"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(n)}return a=a.replace(/\/[^\/]+?\.tga$/,""),"camp"===t.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(a,"/camp_").concat(this.camp,"_open.png"):"school"===t.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(s,"/").concat(a,"/school_").concat(this.force,"_open.png"):defaultImg},handleScreenWidthChange:function(){var t=window.innerWidth-80,e=1920,s=t/e,a=1;t<=e&&(a=s),this.contentZoom=a},splitArrayIntoChunks:function(t,e){for(var s=[],a=0;a<t.length;a+=e)s.push(t.slice(a,a+e));return s},showSchoolIcon:l["t"],getCdnImgUrl:function(t){return"".concat(p["__cdn"],"design/treasure/").concat(t)}}},h=v,C=(s("5c7a"),s("2877")),f=Object(C["a"])(h,a,n,!1,null,null,null);e["default"]=f.exports}}]);
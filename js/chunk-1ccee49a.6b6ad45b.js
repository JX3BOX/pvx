(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ccee49a"],{"0111":function(e,t,n){"use strict";n("d576")},"07d2":function(e,t,n){},"18a0":function(e,t){!function(t,n){e.exports=n(t)}("object"===typeof window&&window,(function(e,t){var n,i,a,r,o,s,c,l,d,u,m,p,g,f,h,v,_,C,y,w,I,S;if(e)return e.jWeixin?e.jWeixin:(n={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},i=function(){var e,t={};for(e in n)t[n[e]]=e;return t}(),a=e.document,r=a.title,o=navigator.userAgent.toLowerCase(),p=navigator.platform.toLowerCase(),s=!(!p.match("mac")&&!p.match("win")),c=-1!=o.indexOf("wxdebugger"),l=-1!=o.indexOf("micromessenger"),d=-1!=o.indexOf("android"),u=-1!=o.indexOf("iphone")||-1!=o.indexOf("ipad"),m=(p=o.match(/micromessenger\/(\d+\.\d+\.\d+)/)||o.match(/micromessenger\/(\d+\.\d+)/))?p[1]:"",g={initStartTime:M(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},f={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:u?1:d?2:-1,clientVersion:m,url:encodeURIComponent(location.href)},h={},v={_completes:[]},_={state:0,data:{}},L((function(){g.initEndTime=M()})),C=!1,y=[],w={config:function(t){P("config",h=t);var i=!1!==h.check;L((function(){if(i)b(n.config,{verifyJsApiList:R(h.jsApiList),verifyOpenTagList:R(h.openTagList)},(v._complete=function(e){g.preVerifyEndTime=M(),_.state=1,_.data=e},v.success=function(e){f.isPreVerifyOk=0},v.fail=function(e){v._fail?v._fail(e):_.state=-1},(r=v._completes).push((function(){O()})),v.complete=function(e){for(var t=0,n=r.length;t<n;++t)r[t]();v._completes=[]},v)),g.preVerifyStartTime=M();else{_.state=1;for(var e=v._completes,t=0,a=e.length;t<a;++t)e[t]();v._completes=[]}var r})),w.invoke||(w.invoke=function(t,n,i){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,T(n),i)},w.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})},ready:function(e){(0!=_.state||(v._completes.push(e),!l&&h.debug))&&e()},error:function(e){m<"6.0.2"||(-1==_.state?e(_.data):v._fail=e)},checkJsApi:function(e){b("checkJsApi",{jsApiList:R(e.jsApiList)},(e._complete=function(e){d&&(n=e.checkResult)&&(e.checkResult=JSON.parse(n));var t,n=e,a=n.checkResult;for(t in a){var r=i[t];r&&(a[r]=a[t],delete a[t])}},e))},onMenuShareTimeline:function(e){k(n.onMenuShareTimeline,{complete:function(){b("shareTimeline",{title:e.title||r,desc:e.title||r,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){k(n.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?b("sendAppMessage",{title:e.title||r,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):b("sendAppMessage",{title:e.title||r,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){k(n.onMenuShareQQ,{complete:function(){b("shareQQ",{title:e.title||r,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){k(n.onMenuShareWeibo,{complete:function(){b("shareWeiboApp",{title:e.title||r,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){k(n.onMenuShareQZone,{complete:function(){b("shareQZone",{title:e.title||r,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){b("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){b("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){b("startRecord",{},e)},stopRecord:function(e){b("stopRecord",{},e)},onVoiceRecordEnd:function(e){k("onVoiceRecordEnd",e)},playVoice:function(e){b("playVoice",{localId:e.localId},e)},pauseVoice:function(e){b("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){b("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){k("onVoicePlayEnd",e)},uploadVoice:function(e){b("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){b("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){b("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){b("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(d){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){e=e||{},b(n.getLocation,{type:e.type||"wgs84"},(e._complete=function(e){delete e.type},e))},previewImage:function(e){b(n.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){b("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){b("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===C?(C=!0,b("getLocalImgData",{localId:e.localId},(e._complete=function(e){var t;C=!1,0<y.length&&(t=y.shift(),wx.getLocalImgData(t))},e))):y.push(e)},getNetworkType:function(e){b("getNetworkType",{},(e._complete=function(e){var t=e,n=(e=t.errMsg,t.errMsg="getNetworkType:ok",t.subtype);if(delete t.subtype,n)t.networkType=n;else{n=e.indexOf(":");var i=e.substring(n+1);switch(i){case"wifi":case"edge":case"wwan":t.networkType=i;break;default:t.errMsg="getNetworkType:fail"}}},e))},openLocation:function(e){b("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},hideOptionMenu:function(e){b("hideOptionMenu",{},e)},showOptionMenu:function(e){b("showOptionMenu",{},e)},closeWindow:function(e){b("closeWindow",{},e=e||{})},hideMenuItems:function(e){b("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){b("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){b("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){b("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){b("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){var t;u&&(t=e.resultStr)&&(t=JSON.parse(t),e.resultStr=t&&t.scan_code&&t.scan_code.scan_result)},e))},openAddress:function(e){b(n.openAddress,{},(e._complete=function(e){(e=e).postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo},e))},openProductSpecificView:function(e){b(n.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var t=e.cardList,i=[],a=0,r=t.length;a<r;++a){var o=t[a];o={card_id:o.cardId,card_ext:o.cardExt};i.push(o)}b(n.addCard,{card_list:i},(e._complete=function(e){if(t=e.card_list){for(var t,n=0,i=(t=JSON.parse(t)).length;n<i;++n){var a=t[n];a.cardId=a.card_id,a.cardExt=a.card_ext,a.isSuccess=!!a.is_succ,delete a.card_id,delete a.card_ext,delete a.is_succ}e.cardList=t,delete e.card_list}},e))},chooseCard:function(e){b("chooseCard",{app_id:h.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))},openCard:function(e){for(var t=e.cardList,i=[],a=0,r=t.length;a<r;++a){var o=t[a];o={card_id:o.cardId,code:o.code};i.push(o)}b(n.openCard,{card_list:i},e)},consumeAndShareCard:function(e){b(n.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},chooseWXPay:function(e){b(n.chooseWXPay,x(e),e),O({jsApiName:"chooseWXPay"})},openEnterpriseRedPacket:function(e){b(n.openEnterpriseRedPacket,x(e),e)},startSearchBeacons:function(e){b(n.startSearchBeacons,{ticket:e.ticket},e)},stopSearchBeacons:function(e){b(n.stopSearchBeacons,{},e)},onSearchBeacons:function(e){k(n.onSearchBeacons,e)},openEnterpriseChat:function(e){b("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)},launchMiniProgram:function(e){b("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){var t;if("string"==typeof e&&0<e.length)return t=e.split("?")[0],t+=".html",void 0!==(e=e.split("?")[1])?t+"?"+e:t}(e.path),envVersion:e.envVersion},e)},openBusinessView:function(e){b("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion},(e._complete=function(e){if(d){var t=e.extraData;if(t)try{e.extraData=JSON.parse(t)}catch(t){e.extraData={}}}},e))},miniProgram:{navigateBack:function(e){e=e||{},L((function(){b("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){L((function(){b("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){L((function(){b("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){L((function(){b("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){L((function(){b("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){L((function(){b("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(t){L((function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}},I=1,S={},a.addEventListener("error",(function(e){var t,n,i;d||(i=(t=e.target).tagName,n=t.src,"IMG"!=i&&"VIDEO"!=i&&"AUDIO"!=i&&"SOURCE"!=i)||-1!=n.indexOf("wxlocalresource://")&&(e.preventDefault(),e.stopPropagation(),(i=t["wx-id"])||(i=I++,t["wx-id"]=i),S[i]||(S[i]=!0,wx.ready((function(){wx.getLocalImgData({localId:n,success:function(e){t.src=e.localData}})}))))}),!0),a.addEventListener("load",(function(e){var t;d||(t=(e=e.target).tagName,e.src,"IMG"!=t&&"VIDEO"!=t&&"AUDIO"!=t&&"SOURCE"!=t)||(t=e["wx-id"])&&(S[t]=!1)}),!0),t&&(e.wx=e.jWeixin=w),w);function b(t,n,i){e.WeixinJSBridge?WeixinJSBridge.invoke(t,T(n),(function(e){A(t,e,i)})):P(t,i)}function k(t,n,i){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){i&&i.trigger&&i.trigger(e),A(t,e,n)})):P(t,i||n)}function T(e){return(e=e||{}).appId=h.appId,e.verifyAppId=h.appId,e.verifySignType="sha1",e.verifyTimestamp=h.timestamp+"",e.verifyNonceStr=h.nonceStr,e.verifySignature=h.signature,e}function x(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function A(e,t,n){"openEnterpriseChat"!=e&&"openBusinessView"!==e||(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var a=t.errMsg;a||(a=t.err_msg,delete t.err_msg,a=function(e,t){var n,a=i[e];return a&&(e=a),a="ok",t&&(n=t.indexOf(":"),"access denied"!=(a=(a=(a=-1!=(a=-1!=(a="failed"==(a="confirm"==(a=t.substring(n+1))?"ok":a)?"fail":a).indexOf("failed_")?a.substring(7):a).indexOf("fail_")?a.substring(5):a).replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=a||(a="permission denied"),""==(a="config"==e&&"function not exist"==a?"ok":a))&&(a="fail"),e+":"+a}(e,a),t.errMsg=a),(n=n||{})._complete&&(n._complete(t),delete n._complete),a=t.errMsg||"",h.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t)),e=a.indexOf(":");switch(a.substring(e+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function R(e){if(e){for(var t=0,i=e.length;t<i;++t){var a=e[t];a=n[a];a&&(e[t]=a)}return e}}function P(e,t){var n;!h.debug||t&&t.isInnerInvoke||((n=i[e])&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||""))}function O(e){var t;s||c||h.debug||m<"6.0.2"||f.systemType<0||(t=new Image,f.appId=h.appId,f.initTime=g.initEndTime-g.initStartTime,f.preVerifyTime=g.preVerifyEndTime-g.preVerifyStartTime,w.getNetworkType({isInnerInvoke:!0,success:function(n){f.networkType=n.networkType,n="https://open.weixin.qq.com/sdk/report?v="+f.version+"&o="+f.isPreVerifyOk+"&s="+f.systemType+"&c="+f.clientVersion+"&a="+f.appId+"&n="+f.networkType+"&i="+f.initTime+"&p="+f.preVerifyTime+"&u="+f.url+"&jsapi_name="+(e?e.jsApiName:""),t.src=n}}))}function M(){return(new Date).getTime()}function L(t){l&&(e.WeixinJSBridge?t():a.addEventListener&&a.addEventListener("WeixinJSBridgeReady",t,!1))}console.warn("can't use weixin-js-sdk in server side")}))},7720:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("3835"),a=(n("99af"),n("a15b"),n("d81d"),n("e9f5"),n("ab43"),n("c1f9"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("9861"),n("88a7"),n("271a"),n("5494"),n("18a0")),r=n.n(a);function o(){return window&&"miniprogram"===window.__wxjs_environment}var s=function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")};function c(e){o()||(location.href=e);var t=e.split("?"),n=Object(i["a"])(t,2),a=n[0],c=n[1],l=c?Object.fromEntries(new URLSearchParams(c)):{};l.path=a;var d="/pages/webview/webview?"+s(l);r.a.miniProgram.navigateTo({url:d})}},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d28b"),n("d9e2"),n("d3b7"),n("3ca3"),n("ddb0");var i=n("06c5");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(i["a"])(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(c)throw o}}}}},c1f9:function(e,t,n){"use strict";var i=n("23e7"),a=n("2266"),r=n("8418");i({target:"Object",stat:!0},{fromEntries:function(e){var t={};return a(e,(function(e,n){r(t,e,n)}),{AS_ENTRIES:!0}),t}})},d576:function(e,t,n){},e341:function(e,t,n){"use strict";n("07d2")},e5d0:function(e,t,n){"use strict";n("99af"),n("b0c0");var i=function(){var e=this,t=e._self._c;return e.userAchievement?t("div",{staticClass:"m-portrait-content",style:{zoom:e.contentZoom}},[t("div",{staticClass:"m-top"},[t("img",{staticClass:"u-top__img",attrs:{src:e.getCdnImgUrl("portrait/top.png")}})]),t("div",{staticClass:"m-introduce"},[t("div",{staticClass:"m-producer"},[t("img",{staticClass:"u-producer",attrs:{src:e.getCdnImgUrl("producer.png")}}),t("img",{staticClass:"u-title__icon",attrs:{src:e.getCdnImgUrl("portrait/title_icon.png")}})]),t("div",{staticClass:"m-info"},[t("div",{staticClass:"u-producer__text"},[e._v("*剑网3魔盒提供技术支持，茗伊插件提供数据支持。")]),t("div",{staticClass:"m-user"},[t("span",{staticClass:"u-name"},[e._v(e._s(e.roleInfo.name))]),e.roleInfo.mount?t("img",{staticClass:"u-icon",attrs:{src:e.showSchoolIcon(e.roleInfo.mount)}}):e._e()]),t("div",{staticClass:"u-progress"},[e._v("奇遇进度："+e._s(e.userAchievement.progress)+"%")]),t("div",{staticClass:"u-time"},[e._v("记录时间："+e._s(e.userAchievement.updated_at))]),t("img",{staticClass:"m-tip",attrs:{src:e.getCdnImgUrl("poetry_por.png")}})]),t("img",{staticClass:"u-introduce__bg",attrs:{src:e.getCdnImgUrl("content_bg.png")}})]),e.userAchievement?[t("div",{staticClass:"m-world"},[t("img",{staticClass:"u-world__bg",attrs:{src:e.getCdnImgUrl("world/world_bg.svg")}}),t("div",{staticClass:"m-world-count"},[t("img",{staticClass:"u-count__img",attrs:{src:e.getCdnImgUrl("portrait/world_qy_bg.png")}}),t("div",{staticClass:"m-count-info"},[e._v(" "+e._s(e.userAchievement.perfectNowNum+"/"+e.userAchievement.perfectAllNum)+" ")])]),e._l(e.userAchievement.perfect,(function(n,i){return t("div",{key:i,staticClass:"m-world-item",class:n.hasClass,style:{zIndex:n.zIndex}},[t("img",{staticClass:"u-item__img",attrs:{src:e.getCdnImgUrl("world/".concat(n.dwID).concat(n.isAct?"_act":"",".png"))}}),t("div",{staticClass:"m-item__text"},[t("img",{staticClass:"u-item__bg",attrs:{src:e.getCdnImgUrl("world/text_bg".concat(n.isAct?"_act":"",".png"))}}),t("span",{staticClass:"u-item__text"},[e._v(e._s(n.szName))])])])}))],2),t("div",{staticClass:"m-qy-box"},[t("div",{staticClass:"m-qy m-ordinary"},[t("div",{staticClass:"m-qy-count"},[t("img",{staticClass:"u-count__img",attrs:{src:e.getCdnImgUrl("portrait/pt_qy_bg.png")}}),t("div",{staticClass:"m-count-info"},[e._v(" "+e._s(e.userAchievement.normalNowNum+"/"+e.userAchievement.normalAllNum)+" ")])]),e.userAchievement.normal.length?t("div",{staticClass:"m-qy-list"},e._l(e.userAchievement.normal,(function(n,i){return t("div",{key:i,staticClass:"m-qy__item"},[[4,118].indexOf(n.dwID)>-1?[t("img",{directives:[{name:"show",rawName:"v-show",value:"hq"==e.currentCamp,expression:"currentCamp == 'hq'"}],staticClass:"u-qy__img",attrs:{src:e.getCdnImgUrl("pt/".concat(n.dwID,"_hq.png"))}}),t("img",{directives:[{name:"show",rawName:"v-show",value:"er"==e.currentCamp,expression:"currentCamp == 'er'"}],staticClass:"u-qy__img",attrs:{src:e.getCdnImgUrl("pt/".concat(n.dwID,"_er.png"))}}),t("img",{directives:[{name:"show",rawName:"v-show",value:!e.currentCamp,expression:"!currentCamp"}],staticClass:"u-qy__img",attrs:{src:e.getCdnImgUrl("pt/".concat(n.dwID,".png"))}})]:t("el-image",{staticClass:"u-qy__img",attrs:{src:e.getCdnImgUrl("pt/".concat(n.dwID,".png"))}},[t("el-image",{staticClass:"u-qy__img",attrs:{slot:"error",src:e.getCdnImgUrl("pt/default.png")},slot:"error"})],1),t("div",{staticClass:"m-qy__text"},[t("img",{staticClass:"u-qy__bg",attrs:{src:e.getCdnImgUrl("pt/text_bg.png")}}),t("span",{staticClass:"u-qy__text"},[e._v(e._s(n.szName))])])],2)})),0):t("div",{staticClass:"u-no-qy"},[t("img",{attrs:{src:e.getCdnImgUrl("portrait/no_qy.png")}})])]),t("div",{staticClass:"m-qy m-pet"},[t("div",{staticClass:"m-qy-count"},[t("img",{staticClass:"u-count__img",attrs:{src:e.getCdnImgUrl("portrait/pet_qy_bg.png")}}),t("div",{staticClass:"m-count-info"},[e._v(" "+e._s(e.userAchievement.petNowNum+"/"+e.userAchievement.petAllNum)+" ")])]),e.userAchievement.pet.length?t("div",{staticClass:"m-qy-list"},e._l(e.userAchievement.pet,(function(n,i){return t("div",{key:i,staticClass:"m-qy__item"},[t("img",{staticClass:"u-qy__img",attrs:{src:e.getImgUrl(n)}}),t("img",{staticClass:"u-qy__border",attrs:{src:e.getCdnImgUrl("pet_img_border.png")}})])})),0):t("div",{staticClass:"u-no-qy"},[t("img",{attrs:{src:e.getCdnImgUrl("portrait/no_qy.png")}})])])])]:e._e(),t("div",{staticClass:"m-bottom",class:{start:e.addClass,over:e.isOver}},[t("img",{staticClass:"u-bottom__img",attrs:{src:e.getCdnImgUrl("portrait/bottom.png")}})])],2):e._e()},a=[],r=(n("a9e3"),n("ac1f"),n("5319"),n("85e4")),o=n("01ea"),s={name:"landscapeContent",props:{userAchievement:{type:[Object,Boolean],default:function(){}},roleInfo:{type:Object,default:function(){}},__imgRoot:{type:String,required:!0},addClass:{type:Boolean,default:!1},isOver:{type:Boolean,default:!1},contentZoom:{type:[Number,String],default:""},currentCamp:{type:String,default:"hq"}},data:function(){return{}},methods:{showSchoolIcon:r["s"],getCdnImgUrl:function(e){return"".concat(o["__cdn"],"design/treasure/").concat(e)},getImgUrl:function(e){var t,n="std",i=null===(t=e.szOpenRewardPath)||void 0===t?void 0:t.toLowerCase();if(!i)return"";if(i=i.replace(/\\/g,"/").replace("ui/image/adventure/",""),!e.szRewardType){var a=i.replace(/\.tga$/,".png");return"".concat(this.__imgRoot,"adventure/").concat(n,"/").concat(a)}return i=i.replace(/\/[^\/]+?\.tga$/,""),"camp"===e.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(n,"/").concat(i,"/camp_").concat(this.camp,"_open.png"):"school"===e.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(n,"/").concat(i,"/school_").concat(this.force,"_open.png"):defaultImg}}},c=s,l=(n("e341"),n("2877")),d=Object(l["a"])(c,i,a,!1,null,null,null);t["a"]=d.exports},fe9e:function(e,t,n){"use strict";n.r(t);n("b0c0");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-body"},[e.isLogin?e.noRole?[t("div",{staticClass:"u-bind_role"},[t("el-empty",{attrs:{description:"当前暂未绑定角色",image:e.__imgPath+"/img/common/empty.png","image-size":200}},[t("a",{staticClass:"u-btn el-button el-button--primary",attrs:{href:"/team/role/bind"}},[e._v("前往绑定 "),t("i",{staticClass:"el-icon-arrow-right"})])])],1)]:[t("div",{staticClass:"m-related-roles"},[t("el-select",{attrs:{"value-key":"ID",placeholder:"请选择当前角色",disabled:!e.isLogin,"popper-class":"m-related-roles-options",size:"small"},model:{value:e.currentRole,callback:function(t){e.currentRole=t},expression:"currentRole"}},[t("span",{staticClass:"u-prefix",attrs:{slot:"prefix"},slot:"prefix"},[e._v(" 角色名称 "),e.isVirtual||e.isSync?e._e():t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请先在游戏中同步成就",placement:"top"}},[t("a",{attrs:{href:"/tool/74559",target:"_blank"}},[t("i",{staticClass:"el-icon-warning-outline"})])])],1),e._l(e.roleList,(function(n){return t("el-option",{key:n.ID,attrs:{value:n,label:n.name}},[t("span",{staticClass:"u-role"},[t("span",{staticClass:"u-role-name"},[t("img",{staticClass:"u-role-icon",attrs:{src:e.showSchoolIcon(n.mount)}}),e._v(e._s(n.name))]),t("span",{staticClass:"u-role-server"},[e._v(e._s(n.server))])])])}))],2),t("el-select",{attrs:{placeholder:"请选择阵营","popper-class":"m-related-roles-options",size:"small"},model:{value:e.currentCamp,callback:function(t){e.currentCamp=t},expression:"currentCamp"}},[t("span",{staticClass:"u-prefix",attrs:{slot:"prefix"},slot:"prefix"},[e._v("所在阵营")]),t("el-option",{attrs:{value:"hq",label:"浩气盟阵营"}}),t("el-option",{attrs:{value:"er",label:"恶人谷阵营"}})],1),t("div",{staticClass:"u-action"},[t("el-tooltip",{attrs:{content:"刷新QQ机器人等渠道快照图片"}},[t("el-button",{staticClass:"u-refresh",attrs:{size:"small"},on:{click:e.onRefresh}},[t("i",{staticClass:"el-icon-refresh"}),e._v("刷新卷轴")])],1),t("el-button",{staticClass:"u-role-setting",attrs:{size:"small"},on:{click:e.onRoleSet}},[t("i",{staticClass:"el-icon-setting"}),e._v("角色管理")])],1)],1),e.noRole?e._e():t("div",{ref:"capture",attrs:{id:"capture"}},[t("portraitContent",{attrs:{"__img-root":e.__imgRoot,"user-achievement":e.userAchievement,"role-info":e.roleInfo,"add-class":e.addClass,"is-over":e.isOver,"content-zoom":e.contentZoom,"current-camp":e.currentCamp}})],1)]:[t("div",{staticClass:"u-bind_role"},[t("el-empty",{attrs:{description:"您还没有登录",image:e.__imgPath+"/img/common/empty.png","image-size":200}},[t("div",{staticClass:"u-btn el-button el-button--primary",on:{click:e.goLogin}},[e._v("前往登录 "),t("i",{staticClass:"el-icon-arrow-right"})])])],1)]],2)},a=[],r=n("c14f"),o=n("1da1"),s=n("b85c"),c=n("5530"),l=(n("99af"),n("4de4"),n("7db0"),n("e9f5"),n("910d"),n("f665"),n("d3b7"),n("ac1f"),n("00b4"),n("5319"),n("987d")),d=n("85e4"),u=n("42e9"),m=n("c9d2"),p=n("c0e9"),g=n.n(p),f=n("01ea"),h=n("e5d0"),v=n("7720"),_={name:"portrait",inject:["__imgRoot","__imgPath"],components:{portraitContent:h["a"]},data:function(){return{addClass:!1,isOver:!1,contentZoom:"",userAchievement:!1,roleList:[],noRole:!1,currentRole:"",currentCamp:"",roleInfo:{},isLogin:m["a"].isLogin(),virtualRole:Object(c["a"])(Object(c["a"])({},m["a"].getInfo()),{},{jx3id:0,ID:~~m["a"].getInfo().uid}),isSync:!1,login_url:f["__Links"].account.login+"?redirect="+location.href,isMiniProgram:Object(d["m"])()}},computed:{client:function(){return this.$store.state.client}},watch:{currentRole:{deep:!0,handler:function(e){this.roleInfo=e,e.jx3id&&this.loadRole(e.jx3id)}},virtualRole:{immediate:!0,deep:!0,handler:function(e){this.currentRole=e}}},created:function(){if(this.isMiniProgram&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){var e,t=document.getElementsByClassName("v-miniprogram"),n=Object(s["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.style.removeProperty("font-size"),i.style.fontSize="16px"}}catch(a){n.e(a)}finally{n.f()}}},mounted:function(){var e=this;Object(l["e"])().then((function(t){var n,i;t.data.data.list.length?(e.noRole=!1,e.roleList=(null===(n=t.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.list.filter((function(e){return!!e.player_id})))||[],e.roleList.length&&(e.currentRole=e.roleList.find((function(e){return e.is_default_role}))||e.roleList[0])):(e.noRole=!0,e.$message.error("未获取到角色信息"))}))},methods:{goLogin:function(){Object(v["a"])(this.login_url)},onRoleSet:function(){window.open("".concat(f["__Root"],"dashboard/role"),"_blank")},onRefresh:function(){var e=this;Object(l["f"])({mode:"portrait",role:this.currentRole.name,server:this.currentRole.server}).then((function(){e.$message.success("刷新卷轴成功")}))},saveAsImage:function(){var e=this;return Object(o["a"])(Object(r["a"])().m((function t(){var n,i,a,o,s,c;return Object(r["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n=e.contentZoom,e.contentZoom=1,t.n=1,new Promise((function(t){e.$nextTick((function(){t()}))}));case 1:return i=e.$refs.capture,t.n=2,g()(i,{allowTaint:!0,useCORS:!0,width:i.offsetWidth,height:i.offsetHeight});case 2:a=t.v,e.contentZoom=n,o=a.toDataURL("image/png"),s=document.createElement("a"),s.href=o,s.download="downloaded-image.png",s.click(),t.n=4;break;case 3:t.p=3,c=t.v,console.error("Error saving image:",c);case 4:return t.a(2)}}),t,null,[[0,3]])})))()},loadRole:function(e){var t=this;Object(u["a"])(e).then((function(n){t.isSync=!!e,t.userAchievement=n,t.addClass=!1,t.isOver=!1,t.$nextTick((function(e){t.start()}))}))},start:function(){var e=this;this.addClass=!0,setTimeout((function(){e.addClass=!1,e.isOver=!0}),2e3),window.addEventListener("resize",this.handleScreenWidthChange),window.addEventListener("load",this.handleScreenWidthChange),this.handleScreenWidthChange()},isVirtual:function(){var e;return!(null!==(e=this.currentRole)&&void 0!==e&&e.jx3id)},getImgUrl:function(e){var t,n="std",i=null===(t=e.szOpenRewardPath)||void 0===t?void 0:t.toLowerCase();if(!i)return"";if(i=i.replace(/\\/g,"/").replace("ui/image/adventure/",""),!e.szRewardType){var a=i.replace(/\.tga$/,".png");return"".concat(this.__imgRoot,"adventure/").concat(n,"/").concat(a)}return i=i.replace(/\/[^\/]+?\.tga$/,""),"camp"===e.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(n,"/").concat(i,"/camp_").concat(this.camp,"_open.png"):"school"===e.szRewardType?"".concat(this.__imgRoot,"adventure/").concat(n,"/").concat(i,"/school_").concat(this.force,"_open.png"):defaultImg},handleScreenWidthChange:function(){var e=window.innerWidth-40,t=900,n=e/t,i=1;e<=t&&(i=n),this.contentZoom=i},showSchoolIcon:d["s"],getCdnImgUrl:function(e){return"".concat(f["__cdn"],"design/treasure/").concat(e)}}},C=_,y=(n("0111"),n("2877")),w=Object(y["a"])(C,i,a,!1,null,null,null);t["default"]=w.exports}}]);
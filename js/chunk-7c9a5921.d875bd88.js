(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c9a5921"],{3570:function(t,e,i){"use strict";i("8aac")},4238:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return o}));var n=i("41cb"),s=Object(n["d"])();function a(t){return s.get("/reputation/menus",{params:t})}function r(t){return s.get("/reputations",{params:t})}function o(t){return s.get("/reputation",{params:t})}},"498a":function(t,e,i){"use strict";var n=i("23e7"),s=i("58a8").trim,a=i("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return s(this)}})},5605:function(t,e,i){"use strict";i.r(e);i("ac1f"),i("5319");var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"reputation-container"},[e("PvxSuspension",{attrs:{isType:"list","bottom-num":"100px",searchRouter:"/search"}}),e("CommonToolbar",{staticClass:"m-reputation-tabs",attrs:{color:"#d16400",search:""},on:{update:t.updateToolbar},scopedSlots:t._u([{key:"prefix",fn:function(){return[e("div",{staticClass:"m-toolbar-item"},[e("div",{staticClass:"u-item",class:{active:t.isAll},on:{click:t.toAll}},[t._v("全部")]),e("el-select",{staticClass:"u-select",class:{active:t.dlc},attrs:{clearable:""},scopedSlots:t._u([{key:"prefix",fn:function(){return[t._v(" 版本 ")]},proxy:!0}]),model:{value:t.dlc,callback:function(e){t.dlc=e},expression:"dlc"}},t._l(t.versions,(function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})})),1)],1)]},proxy:!0}])}),e("el-scrollbar",{staticClass:"m-reputation-tabs__miniprogram"},[e("div",{staticClass:"m-reputation-tabs__content"},[e("div",{staticClass:"u-tab",class:{active:t.isAll},on:{click:t.toAll}},[t._v("全部")]),t._l(t.versions,(function(i){return e("div",{key:i.value,staticClass:"u-tab",class:{active:t.dlc===i.value},on:{click:function(e){t.dlc=i.value}}},[t._v(" "+t._s(i.label.replace(/\([^)]*\)/g,""))+" ")])}))],2)]),t.isAll&&!this.keyword?e("div",{staticClass:"reputation-list-wrapper"},[e("div",{staticClass:"reputation-title"},[t._v("资料片新增")]),e("div",{staticClass:"reputation-list"},t._l(t.newsList,(function(t){return e("reputation-item",{key:t.dwForceID,attrs:{item:t}})})),1)]):t._e(),t.showList.length?t._l(t.showList,(function(i){return e("div",{key:i.value,staticClass:"reputation-list-wrapper"},[e("div",{staticClass:"reputation-title",class:t.isAll?"":"is-not-all-title"},[t._v(t._s(i.label))]),e("div",{staticClass:"reputation-list"},t._l(i.list,(function(t){return e("reputation-item",{key:t.dwForceID,attrs:{item:t}})})),1)])})):t._e()],2)},s=[],a=i("5530"),r=(i("99af"),i("4de4"),i("0481"),i("caad"),i("d81d"),i("4069"),i("e9f5"),i("910d"),i("ab43"),i("a9e3"),i("b64b"),i("d3b7"),i("2532"),i("3ca3"),i("841c"),i("498a"),i("ddb0"),i("60b8")),o=i("e5d7"),l=i("7dcc"),c=i("4238"),u=i("ffe2"),f=i("a69c"),d=i("cc9a"),p=i("2ef0"),v={name:"Index",components:{ReputationItem:l["a"],CommonToolbar:o["a"],PvxSuspension:r["a"]},data:function(){return{loading:!1,news:[],newsList:[],level:-1,versions:[],versionList:[],isAll:!0,keyword:"",dlc:""}},computed:{client:function(){return this.$store.state.client},params:function(){return{page:1,per:50,client:this.client}},showList:function(){var t=this,e=Object(p["cloneDeep"])(this.versionList);if(this.dlc&&(e=e.filter((function(e){return e.value===Number(t.dlc)}))),this.keyword){var i=this.keyword.trim();e=e.map((function(t){return t.list=t.list.filter((function(t){return t.szName.includes(i)})),t})).filter((function(t){return t.list.length}))}return e}},watch:{dlc:function(t){this.isAll=!t}},methods:{updateToolbar:function(t){var e=t.search;this.keyword=e},toAll:function(){this.isAll=!0,this.dlc=""},loadData:function(){var t=this;this.loading=!0,Object(d["a"])("reputation-newest",{client:this.client}).then((function(e){t.news=e.split(",").map((function(t){return Number(t)}))})).then((function(){Object(c["c"])({client:t.client}).then((function(e){var i="std"===t.client?u:f,n=e.data.dlc||[],s=Object.keys(i).map((function(t){return"".concat(t,"(").concat(i[t].level,"级)")})).reverse(),r=n.map((function(t,e){return{value:t.nDlcID,total:t.total,label:s[e]}}));t.versions=r.reverse();var o=t.versions.map((function(e){return Object(c["b"])(Object(a["a"])({dlc:e.value},t.params))}));Promise.all(o).then((function(e){var i=e.map((function(t){return t.data.list}));t.newsList=i.flat().filter((function(e){return t.news.includes(e.dwForceID)}));var n=t.versions.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{list:i.flat().filter((function(e){return e.nDlcID===t.value}))})}));t.versionList=n}))}))})).finally((function(){t.loading=!1}))}},mounted:function(){this.loadData()}},m=v,h=(i("3570"),i("2877")),b=Object(h["a"])(m,n,s,!1,null,null,null);e["default"]=b.exports},"7dcc":function(t,e,i){"use strict";i("fb6a"),i("ac1f"),i("5319");var n=function(){var t=this,e=t._self._c;return t.item.bHide?t._e():e("div",{staticClass:"reputation-item",on:{click:function(e){return t.go(t.item.dwForceID)}}},[e("div",{staticClass:"reputation-icon"},[t.getIcon(t.item.szIconPath)?e("img",{attrs:{src:t.getIcon(t.item.szIconPath)}}):e("div",{staticClass:"no-img"})]),e("div",{staticClass:"m-reputation-icon__miniprogram"},[t._v(" "+t._s(t.item.szName.slice(0,1))+" ")]),e("div",{staticClass:"reputation-name-wrap"},[e("div",{staticClass:"reputation-name"},[t._v(t._s(t.item.szName))]),t._m(0),e("div",{staticClass:"m-reputation-desc__miniprogram",domProps:{innerHTML:t._s(t.item.szDesc.replace(/\\n/g,""))}})])])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"progress-wrap"},[e("div",{staticClass:"progress-value"})])}],a=i("65c2"),r={name:"ReputationItem",props:{item:{type:Object,required:!0}},methods:{go:function(t){window.open("/reputation/".concat(t),"_self")},getIcon:function(t){var e=t?t.replace(/\//g,"\\"):"",i=e?e.split("\\")[e.split("\\").length-1].toLowerCase().split(".tga")[0]:"";return i?a["__imgPath"]+"reputation/reputation/std/icon/"+i+".png":""}}},o=r,l=(i("fdff"),i("2877")),c=Object(l["a"])(o,n,s,!1,null,null,null);e["a"]=c.exports},"7edf":function(t,e,i){"use strict";i("fc7f")},"8aac":function(t,e,i){},"8f65":function(t,e,i){},c8d2:function(t,e,i){"use strict";var n=i("5e77").PROPER,s=i("d039"),a=i("5899"),r="​᠎";t.exports=function(t){return s((function(){return!!a[t]()||r[t]()!==r||n&&a[t].name!==t}))}},e5d7:function(t,e,i){"use strict";i("ac1f"),i("841c");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-common-toolbar"},[e("div",{staticClass:"m-toolbar-tool"},[t._t("tool")],2),e("div",{staticClass:"m-toolbar-box"},[t._t("prefix"),t.types.length?e("div",{staticClass:"m-toolbar-item"},[t.isMiniProgram?[e("div",{staticClass:"m-toolbar-item__mobile"},[e("div",{staticClass:"u-current-item"},[e("div",{staticClass:"u-item",style:t.style(t.activeType.value)},[t._v(t._s(t.activeType.label))]),e("div",{staticClass:"u-more",class:{"is-active":t.showMore},on:{click:function(e){t.showMore=!t.showMore}}},[e("i",{staticClass:"el-icon-more"})])]),t.showMore?e("div",{staticClass:"u-item-options"},[t._l(t.types,(function(i,n){return[i.value!=t.active?e("div",{key:n,staticClass:"u-item",style:t.style(i.value),on:{click:function(e){t.changeType(i.value),t.showMore=!1}}},[t._v(" "+t._s(i.label)+" ")]):t._e()]}))],2):t._e(),e("div",{staticClass:"u-search"},[e("el-input",{staticClass:"u-search-input",attrs:{placeholder:"请输入搜索内容","suffix-icon":"el-icon-search"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)])]:t._l(t.types,(function(i,n){return e("div",{key:n,staticClass:"u-item",style:t.style(i.value),on:{mouseover:function(e){return t.handleMouseOver(i.value)},mouseout:t.handleMouseOut,click:function(e){return t.changeType(i.value)}}},[t._v(" "+t._s(i.label)+" ")])}))],2):t._e(),t._t("prepend"),t.search&&!t.isMiniProgram?e("div",{staticClass:"m-toolbar-item m-toolbar-search"},[t._t("filter"),e("div",{staticClass:"u-search"},[e("el-input",{staticClass:"u-search-input",attrs:{placeholder:"请输入搜索内容","suffix-icon":"el-icon-search"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],2):t._e(),t._t("append")],2)])},s=[],a=(i("7db0"),i("e9f5"),i("f665"),i("a9e3"),i("d3b7"),{name:"toolbar",props:{types:{type:Array,default:function(){return[]}},search:{type:Boolean,default:!1},color:{type:String,default:"#6b52ff"},actColor:{type:String,default:"#ffffff"},active:{type:[String,Number],default:null}},data:function(){return{type:null,hover:null,title:"",showMore:!1}},computed:{isMiniProgram:function(){var t;return(null===(t=document.getElementsByClassName("v-miniprogram"))||void 0===t?void 0:t.length)>0},params:function(){var t={type:this.type};return this.title&&(t.search=this.title),t},activeType:function(){var t=this;return this.types.find((function(e){return e.value===t.active}))}},methods:{changeType:function(t){this.type=t},handleMouseOver:function(t){this.hover=t},handleMouseOut:function(){this.hover=null},style:function(t){var e=this.hover===t||this.type===t,i=e?this.color:"#fff",n=e?this.actColor:"#949494";return{backgroundColor:i,color:n}}},watch:{params:{deep:!0,handler:function(t){this.$emit("update",t)}},types:{immediate:!0,deep:!0,handler:function(t){t&&t.length&&(this.type=this.active||t[0].value)}}}}),r=a,o=(i("7edf"),i("2877")),l=Object(o["a"])(r,n,s,!1,null,null,null);e["a"]=l.exports},fc7f:function(t,e,i){},fdff:function(t,e,i){"use strict";i("8f65")}}]);
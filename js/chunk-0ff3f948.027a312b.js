(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ff3f948"],{"0481":function(t,e,i){"use strict";var n=i("23e7"),a=i("a2bf"),c=i("7b0b"),s=i("07fa"),r=i("5926"),o=i("65f0");n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=c(this),i=s(e),n=o(e,0);return n.length=a(n,e,e,i,0,void 0===t?1:r(t)),n}})},"0b09":function(t,e,i){},"0ca8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAASCAYAAACuLnWgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF+2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA2LTI3VDExOjI0OjU0KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wNy0wN1QwNjoxNDoxMSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wNy0wN1QwNjoxNDoxMSswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJHSU1QIGJ1aWx0LWluIHNSR0IiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NWYzZWUxOWMtZDZjOC03NjQ2LWEzM2YtYmI1NWViNWRkNWNiIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YmQzNjFmMmEtOThjMi1hNjQ4LThkZWUtNzcyZGQ5NDdkODI5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZGVlNmJiOGMtYmNhOS01MjQ5LThhYjEtNzU2N2M0MTk2NmRlIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkZWU2YmI4Yy1iY2E5LTUyNDktOGFiMS03NTY3YzQxOTY2ZGUiIHN0RXZ0OndoZW49IjIwMjEtMDYtMjdUMTE6MjQ6NTQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NWYzZWUxOWMtZDZjOC03NjQ2LWEzM2YtYmI1NWViNWRkNWNiIiBzdEV2dDp3aGVuPSIyMDIxLTA3LTA3VDA2OjE0OjExKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Bz8DqwAAAgVJREFUOMu1lc1L40AUwIfS7KZxcSPUEkQ0fqBlDdJoL5WKEFmrUhHiSUEUZBGsn3jx4yIKKlr0oHgqyLK4B2HPC16FveyuRz36D3jxL3i+N3biiBUTxYEfLySZ98tL5k0YALD35umJEkNlrBxpMaLKDLKFp4aQWuRDqfsDSyi5aSg/UgkN+tO6hx3XoMZQv+Mt1lskGgomKbnbp3NkCTHSZ0A6oUOxsuASNczm3O4GkDncz3q4mSYYyVZyUnGVcANJUNCcTMTgz3kO8hsZDh1fXi0+YnWh4ZEIp1b5kqDgM7Kd33E8iYhyJUThyOYiIdMjoVm/ki6qgiSywAgz/ooEOk6l5LLIrlZvqJoXJbrKVrI9Mch9q4PC8ShcXOdhaqwVUiYDs1I5wevDGP86+MEXF2zYO8zwSDj3i6DNj6TwnASvtdPrIJGQFH66sLaeliWdfiS7JCGeq8Su125liaioKIn7kfS2NpdxCSWXJZREgEKeWEgoWqZGkqifJRzBTv5PjTaAouUlC05OHR5z0y0e+QNc2ps2jA+bXsQHdIM0Ywd1MklkEU+M/Dqb4FBiQdLS/ykhpgXqeKwmJyQCuZL+r7osANyCnNfsXZG6KJuXJZRYppTgVbswji9NhvY71YgfPPmAVa+B8UmdV8Oh6Ju3+uL4SLJYhTKGzOHxYPF/wvz8T+4ACwlDiF9TSoMAAAAASUVORK5CYII="},"0d0a":function(t,e,i){},"0db8":function(t,e,i){"use strict";i("0d0a")},1248:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("span",{staticClass:"c-game-price",class:{"is-align":t.align}},[t.price<0?e("span",{staticClass:"u-neg"},[t._v("- ")]):t._e(),t.formatPrice(t.price,"zhuan")||t.align?e("span",{staticClass:"u-zhuan"},[e("span",{staticClass:"u-value"},[t._v(t._s(t.formatPrice(t.price,"zhuan")))]),e("img",{attrs:{src:i("f0a9"),alt:"砖"}})]):t._e(),t.formatPrice(t.price,"jin")||t.align?e("span",{staticClass:"u-jin"},[e("span",{staticClass:"u-value"},[t._v(t._s(t.formatPrice(t.price,"jin")))]),e("img",{attrs:{src:i("29fc"),alt:"金"}})]):t._e(),t.formatPrice(t.price,"yin")||t.align?e("span",{staticClass:"u-yin"},[e("span",{staticClass:"u-value"},[t._v(t._s(t.formatPrice(t.price,"yin")))]),e("img",{attrs:{src:i("af18"),alt:"银"}})]):t._e(),t.formatPrice(t.price,"tong")||t.align?e("span",{staticClass:"u-tong"},[e("span",{staticClass:"u-value"},[t._v(t._s(t.formatPrice(t.price,"tong")))]),e("img",{attrs:{src:i("0ca8"),alt:"铜"}})]):t._e()])},a=[],c={name:"GamePrice",props:["price","align","align-price"],methods:{formatPrice:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;t<0&&(t=-t);var i={zhuan:Math.floor(.01*t*.01*1e-4)||0,jin:Math.floor(.01*t*.01%1e4)||0,yin:Math.floor(.01*t%100)||0,tong:Math.floor(t%100)||0};return i[e]}}},s=c,r=(i("516e"),i("2877")),o=Object(r["a"])(s,n,a,!1,null,null,null);e["a"]=o.exports},"12d4":function(t){t.exports=JSON.parse('["蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","眉间雪","山海相逢","傲血戰意","山海相逢","眉间雪"]')},"1bd3":function(t){t.exports=JSON.parse('{"a":{"std":[{"key":"tailoring","name":"缝纫","ProfessionID":"5"},{"key":"cooking","name":"烹饪","ProfessionID":"4"},{"key":"medicine","name":"制药","ProfessionID":"7"},{"key":"founding","name":"锻造","ProfessionID":"6"},{"key":"furniture","name":"梓匠","ProfessionID":"15"}],"origin":[{"key":"tailoring","name":"缝纫","ProfessionID":"5"},{"key":"cooking","name":"烹饪","ProfessionID":"4"},{"key":"medicine","name":"制药","ProfessionID":"7"},{"key":"founding","name":"锻造","ProfessionID":"6"}]}}')},"29fc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAASCAYAAACuLnWgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF+2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA2LTI3VDExOjI0OjU0KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wNy0wN1QwNjoxMjo0MCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wNy0wN1QwNjoxMjo0MCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJHSU1QIGJ1aWx0LWluIHNSR0IiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MGJkMzdhNWEtMDhjZC0yOTRjLWFlNmUtOGMzZjQ5MzA5YTBkIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6M2E1Y2YwZjMtZmNiNy1hNjRjLTk2ZWMtMzBkZDViMDU1MmVmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Y2E3OTYzMmQtZGU5My00ZTQ0LTgwNDYtY2JmMzE5ZWZjNjBkIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYTc5NjMyZC1kZTkzLTRlNDQtODA0Ni1jYmYzMTllZmM2MGQiIHN0RXZ0OndoZW49IjIwMjEtMDYtMjdUMTE6MjQ6NTQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGJkMzdhNWEtMDhjZC0yOTRjLWFlNmUtOGMzZjQ5MzA5YTBkIiBzdEV2dDp3aGVuPSIyMDIxLTA3LTA3VDA2OjEyOjQwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qj+jhgAAAfZJREFUOMvdlE1IG0EYhqdiJC6KkShGRDSoMai0/gTtWrBUAoGooAsWFDyIChahCOLBi4q/lxRLlZSKvQR7CURBiKiQQ88FD3rwLD30mKPHr/NOduIsbIwXDzrw8C0beJ99h8kwImJPDXt5EnMVOQuZxmwWf1/BWQy2u38DJ2MBTjl+siGn5M1rv3s9+NZDgAfucprM8F4j3EAHX0OU+qbT6qSPuEigt2ZY+OgTfB6upx6/68RWwgU3kSWdUrGwBQSDfzdzAkikCCTWdAu/ljqEyFaid9X8TOwblNgJCi7PZwXJ/TDdXkXpLp0SpGIGxTf76PunVtoY8tDerJ8OV3RBMso/LGrQ8nQ35dqud5AgODLjzYog+XM6L0SYqgDIcFXyvrPmKJdE420o/TciwmUjKcEEkEjQCsFoszHiEc9owbPKHjpdGlqoIhkOEUCwZct4OJBN0OKh05U5qk5WHdsZpPT1AmHGt0MWYvxwRMa8WZYnGgTJrQ4xHQWOqrwSUzQhRZfx8awAz2c/DCGSMlXgKnGOyYyckoJXmT8SlxRDNDrgE8EWLuYsIkXwRf3QfNtVrIqmPnhpazqQbQKJ2iQUqBQCTumjJWojLHeJo8Xn0U70RheB/rZ72mq1Y34b1NldQ3kldlcXgJDPZhOHCXu05Nlf9f8B/yrBMSqLm+8AAAAASUVORK5CYII="},"2b50":function(t,e,i){"use strict";i("5697")},"2de0":function(t,e,i){"use strict";i("5e6c")},"2e86":function(t,e,i){},4069:function(t,e,i){"use strict";var n=i("44d2");n("flat")},"470e":function(t,e,i){"use strict";i("0b09")},"4ffe":function(t,e,i){"use strict";i("603f")},"516e":function(t,e,i){"use strict";i("8926")},5697:function(t,e,i){},"5e6c":function(t,e,i){},"603f":function(t,e,i){},"7edf":function(t,e,i){"use strict";i("fc7f")},"7f46":function(t,e,i){"use strict";i("2e86")},8926:function(t,e,i){},"8f09":function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return r}));var n=i("c1df"),a=i.n(n);function c(t){return a()(t).fromNow()}function s(t){return a()(t).format("YYYY-MM-DD")}function r(t){return a()(t).format("YYYY-MM-DD HH:mm:ss")}a.a.locale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY年MM月DD日",LLL:"YYYY年MM月DD日Ah点mm分",LLLL:"YYYY年MM月DD日ddddAh点mm分",l:"YYYY-M-D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,i){var n=100*t+e;return n<600?"凌晨":n<900?"早上":n<1130?"上午":n<1230?"中午":n<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})},"94d2":function(t,e,i){"use strict";i("b49f")},"9efa":function(t,e,i){},a2bf:function(t,e,i){"use strict";var n=i("e8b5"),a=i("07fa"),c=i("3511"),s=i("0366"),r=function(t,e,i,o,l,u,m,p){var d,f,h=l,v=0,b=!!m&&s(m,p);while(v<o)v in i&&(d=b?b(i[v],v,e):i[v],u>0&&n(d)?(f=a(d),h=r(t,e,d,f,h,u-1)-1):(c(h+1),t[h]=d),h++),v++;return h};t.exports=r},a59a:function(t){t.exports=JSON.parse('["缘起稻香","天宝盛世"]')},a732:function(t,e,i){"use strict";var n=i("23e7"),a=i("c65b"),c=i("2266"),s=i("59ed"),r=i("825a"),o=i("46c4"),l=i("2a62"),u=i("f99f"),m=u("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:m},{some:function(t){r(this);try{s(t)}catch(n){l(this,"throw",n)}if(m)return a(m,this,t);var e=o(this),i=0;return c(e,(function(e,n){if(t(e,i++))return n()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},af18:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAASCAYAAACuLnWgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF+2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA2LTI3VDExOjI0OjU0KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wNy0wN1QwNjoxMzoyNiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wNy0wN1QwNjoxMzoyNiswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJHSU1QIGJ1aWx0LWluIHNSR0IiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzE2ZTgxYzQtMDQ2MC02ZDRhLWI0ZTAtMDgzYzEzZDhjNTgwIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODdmZGNhODktZTgyZC1hMjQ4LWIxZTUtNTlkMTVjN2U4YTFlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjFlMjE3ZDktYWEzOC1lZjQ1LWE1YmItNjZlOTIwYWZkOTk3Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmMWUyMTdkOS1hYTM4LWVmNDUtYTViYi02NmU5MjBhZmQ5OTciIHN0RXZ0OndoZW49IjIwMjEtMDYtMjdUMTE6MjQ6NTQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MzE2ZTgxYzQtMDQ2MC02ZDRhLWI0ZTAtMDgzYzEzZDhjNTgwIiBzdEV2dDp3aGVuPSIyMDIxLTA3LTA3VDA2OjEzOjI2KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+WEI/qAAAAdRJREFUOMvdlL9LQlEUx99g8SQHx6KIhLCEsB9IUQhSOEQUgg3lIP0gIZJKiCB60A8wghDJECmQfgwVQTUEtoTU0g8amgI3Gx0a/BNO59w6r2doWtDShQ/3DeeeD997370SAEh/jfT/JMWG0SCXIVZklZB0kkHl69BJcl6JrJPNSH+3vT1D2NosI1hejVTQPOR2Pu9trwCB32DvsjJXBNa/To66gWZkPK8EG+8o8z5InEcF8ZiSQ+YlKWDRQsCrkjgKQTysqJAsfxJZmo1tBYF5uDkWXJxEIJ1KQjabFtxen0J8U4ElbO739Ik5sh6Aw92QSrfdVlBipObp1J2QUHOSxLcUVcKCubE+ISDeBcEcCZ6Zp+DBuwZ69khCUHMSsYwFzGfzoEgzNz0qBDSjpLyghNKgSEg4BctIwvB28ZYR2hTUq9gvXBHdUCB5eaiysjgDobWAwO9zC1y9Dpif9qpQIntHE8g6qawUCY1maqwVnR2FBSzRCihtYGqYBA3coKTLiAtyRE/3ZyqUSCugVFjv0K4v+caTyOno2CcZJyG0EhQ8WupNg7xNP5aIA9LLtaaaSl9ro2kZAaazxXJgrquewBJ9vnW/ers+RpUG/XeF//OpfwM0X9GDO5SBFgAAAABJRU5ErkJggg=="},b49f:function(t,e,i){},b5ad:function(t,e,i){"use strict";i("b676")},b676:function(t,e,i){},dd71:function(t,e,i){"use strict";i("9efa")},e1bd:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));const n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let a=(t=21)=>{let e="",i=crypto.getRandomValues(new Uint8Array(t|=0));while(t--)e+=n[63&i[t]];return e}},e343:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"c",(function(){return c})),i.d(e,"e",(function(){return s})),i.d(e,"g",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return l})),i.d(e,"f",(function(){return u}));var n=i("41cb");function a(t){return Object(n["a"])().get("/api/cms/app/item-plan/".concat(t)).then((function(t){return t.data.data}))}function c(t){return Object(n["a"])().delete("/api/cms/app/item-plan/".concat(t))}function s(){return Object(n["a"])().get("/api/cms/app/item-plan/mine",{params:{no_page:1,_no_cache:1,type:3}}).then((function(t){return t.data.data}))}function r(t,e){return Object(n["a"])().put("/api/cms/app/item-plan/".concat(t),e)}function o(t){return Object(n["a"])().post("/api/cms/app/item-plan",t)}function l(t){return Object(n["a"])().delete("/api/cms/app/item-plan/batch/".concat(t))}function u(t){return Object(n["a"])().get("/api/cms/app/item-plan/mine",{params:{ids:t,_no_cache:1,type:3}}).then((function(t){return t.data.data}))}},e5d7:function(t,e,i){"use strict";i("ac1f"),i("841c");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-common-toolbar"},[e("div",{staticClass:"m-toolbar-tool"},[t._t("tool")],2),e("div",{staticClass:"m-toolbar-box"},[t._t("prefix"),t.types.length?e("div",{staticClass:"m-toolbar-item"},[t.isMiniProgram?[e("div",{staticClass:"m-toolbar-item__mobile"},[e("div",{staticClass:"u-current-item"},[e("div",{staticClass:"u-item",style:t.style(t.activeType.value)},[t._v(t._s(t.activeType.label))]),e("div",{staticClass:"u-more",class:{"is-active":t.showMore},on:{click:function(e){t.showMore=!t.showMore}}},[e("i",{staticClass:"el-icon-more"})])]),t.showMore?e("div",{staticClass:"u-item-options"},[t._l(t.types,(function(i,n){return[i.value!=t.active?e("div",{key:n,staticClass:"u-item",style:t.style(i.value),on:{click:function(e){t.changeType(i.value),t.showMore=!1}}},[t._v(" "+t._s(i.label)+" ")]):t._e()]}))],2):t._e(),e("div",{staticClass:"u-search"},[e("el-input",{staticClass:"u-search-input",attrs:{placeholder:"请输入搜索内容","suffix-icon":"el-icon-search"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)])]:t._l(t.types,(function(i,n){return e("div",{key:n,staticClass:"u-item",style:t.style(i.value),on:{mouseover:function(e){return t.handleMouseOver(i.value)},mouseout:t.handleMouseOut,click:function(e){return t.changeType(i.value)}}},[t._v(" "+t._s(i.label)+" ")])}))],2):t._e(),t._t("prepend"),t.search&&!t.isMiniProgram?e("div",{staticClass:"m-toolbar-item m-toolbar-search"},[t._t("filter"),e("div",{staticClass:"u-search"},[e("el-input",{staticClass:"u-search-input",attrs:{placeholder:"请输入搜索内容","suffix-icon":"el-icon-search"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],2):t._e(),t._t("append")],2)])},a=[],c=(i("7db0"),i("e9f5"),i("f665"),i("a9e3"),i("d3b7"),{name:"toolbar",props:{types:{type:Array,default:function(){return[]}},search:{type:Boolean,default:!1},color:{type:String,default:"#6b52ff"},actColor:{type:String,default:"#ffffff"},active:{type:[String,Number],default:null}},data:function(){return{type:null,hover:null,title:"",showMore:!1}},computed:{isMiniProgram:function(){var t;return(null===(t=document.getElementsByClassName("v-miniprogram"))||void 0===t?void 0:t.length)>0},params:function(){var t={type:this.type};return this.title&&(t.search=this.title),t},activeType:function(){var t=this;return this.types.find((function(e){return e.value===t.active}))}},methods:{changeType:function(t){this.type=t},handleMouseOver:function(t){this.hover=t},handleMouseOut:function(){this.hover=null},style:function(t){var e=this.hover===t||this.type===t,i=e?this.color:"#fff",n=e?this.actColor:"#949494";return{backgroundColor:i,color:n}}},watch:{params:{deep:!0,handler:function(t){this.$emit("update",t)}},types:{immediate:!0,deep:!0,handler:function(t){t&&t.length&&(this.type=this.active||t[0].value)}}}}),s=c,r=(i("7edf"),i("2877")),o=Object(r["a"])(s,n,a,!1,null,null,null);e["a"]=o.exports},f0a9:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAASCAYAAACuLnWgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGymlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA2LTI3VDExOjI0OjU0KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wNy0wN1QwNjoxMjo1MyswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wNy0wN1QwNjoxMjo1MyswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5ZGRiZTFmMi01MTA0LWQ0NDItYWQ5NS1iOTcyMTE2YTA3NmEiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmMzJiMGQxYy00N2Q5LWY1NGItODMzYS1hNjEwZjRiMzQ0NDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjOTE4MWRlOC1lN2NjLWRhNDUtYjFhMS03OWM1ZDkxNTdiNjUiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM5MTgxZGU4LWU3Y2MtZGE0NS1iMWExLTc5YzVkOTE1N2I2NSIgc3RFdnQ6d2hlbj0iMjAyMS0wNi0yN1QxMToyNDo1NCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMjdjOWVkYS1hM2ZmLWZiNDUtYTViMS1mMGZmYzdjNDdhNGEiIHN0RXZ0OndoZW49IjIwMjEtMDctMDdUMDY6MTE6NTYrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWRkYmUxZjItNTEwNC1kNDQyLWFkOTUtYjk3MjExNmEwNzZhIiBzdEV2dDp3aGVuPSIyMDIxLTA3LTA3VDA2OjEyOjUzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+vCyjFAAAAfBJREFUOMut1E8og3EYwPH3KBzmpvydg2haRKRWUnawiLmsJqU4qOXiTaa3Wasdl4NiViS1HIRprLlYSrTSDnLYCYfFDtSKww5aj+f55bd+r/x53/Grb/udnk/P27tXAgBJ7PNJxpX+bb/Ti03mnjaapF/O53ls5ncIvEH5tm9+UbH33iJQoPCeSMZjXf+CECBbO1YxwE0KuAGLIGeLMfUTpAnJ3ow1LNlrjjHAO8CrDI/XDkhFLOwelFthqr3s4Spus5aMiEB0pZsNp2LLRobBmwsQ+BbSijCAshkkNlxECFBBJzFHSQhtwCEazuOICmozvgTnXA5diGI3AC+bViCXCcDGoplFd7jvhUzCxKL71dEMTFmMz8GFgXFdyJanswjRYOriYEKFJDfrWJALFCH87dGKHIqQbJWKEMW3oPY9BgYQhJtQXm2vcFqp59D5roMhIiRuwTfRjdC5uTitxn/3CQZnOyOIlLGyaRnyWRnCnmYW3e/SMVCcFrDVSrC37pZ1fVY4FJo3qSAazEtFh9hwHiJruhAO4eAoDeeQMigVAbrTcGGTUd0IHXxEVSJEg1UJjwofXUVJCJ38a75SGW4NYbDlm2C5R80w1oibVEv500h4uqRP/VdQ2D8bouECkhGBPyMcuowG+jDnR31aPpDvt7XVCXcJR68AAAAASUVORK5CYII="},f9c2:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-manufacture"},[e("CommonToolbar",{attrs:{color:"#07ad36",search:"",active:t.active,types:t.craftList},on:{update:t.updateToolbar}}),e("div",{staticClass:"m-manufacture-body"},[e("div",{staticClass:"m-manufacture-box"},[e("div",{staticClass:"m-manufacture-title"},[e("span",{staticClass:"u-title"},[t._v(t._s(t.craftName))]),e("el-select",{staticClass:"m-server",attrs:{placeholder:"请选择",size:"small"},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}},[e("span",{staticClass:"u-prefix",attrs:{slot:"prefix"},slot:"prefix"},[t._v(" 区服价格")]),t._l(t.serverList,(function(t,i){return e("el-option",{key:i,attrs:{label:t,value:t}})}))],2)],1),e("Recipe",{ref:"recipe",attrs:{list:t.showList,"craft-key":t.craftKey,server:t.server},on:{addCartItem:t.onAddCartItem}})],1),e("Cart",{ref:"cart",attrs:{data:t.cartItem,server:t.server,"craft-list":t.list},on:{"material-make":t.onMaterialMake,"update-plan":t.onPlanUpdate}}),e("MyList",{ref:"plan-list",on:{"view-plan":t.onViewPlan,"merge-plan":t.onMergePlan}})],1)],1)},a=[],c=i("2909"),s=(i("4de4"),i("c740"),i("caad"),i("d81d"),i("14d9"),i("13d5"),i("4e82"),i("b0c0"),i("e9f5"),i("910d"),i("ab43"),i("9485"),i("a9e3"),i("d3b7"),i("ac1f"),i("2532"),i("841c"),i("1c3b")),r=i("12d4"),o=i("a59a"),l=i("1bd3"),u=i("e5d7"),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-manufacture-recipe"},[e("div",{staticClass:"m-recipe-list"},t._l(t.list,(function(i,n){return e("span",{key:n,staticClass:"m-recipe-group"},[e("span",{class:["m-list m-title",{active:n==t.showIndex}],on:{click:function(e){return t.changeIndex(n)}}},[e("span",{staticClass:"u-name"},[e("i",{class:n==t.showIndex?"el-icon-caret-bottom":"el-icon-caret-right"}),t._v(" "+t._s(i.BelongName)+" ")])]),t._l(i.list,(function(i,a){return e("span",{directives:[{name:"show",rawName:"v-show",value:t.showIndex==n,expression:"showIndex == i"}],key:a,class:["m-list",{active:t.itemId==i.ID},"u-quality-bg--".concat(i.Quality)],on:{click:function(e){return t.changeItem(i.ID)}}},[e("span",{staticClass:"u-item"},[e("img",{staticClass:"u-img",attrs:{src:t.iconLink(i.IconID),alt:i.Name}}),t._v(" "+t._s(i.Name))]),t.itemId==i.ID?e("div",{staticClass:"m-add"},[e("el-input-number",{attrs:{size:"small",min:1},on:{input:t.onlyInteger},nativeOn:{click:function(t){t.stopPropagation()}},model:{value:t.recipe.count,callback:function(e){t.$set(t.recipe,"count",t._n(e))},expression:"recipe.count"}}),e("el-button",{attrs:{icon:"el-icon-shopping-cart-2",size:"small"},on:{click:function(e){return t.onAddCartItem(i)}}})],1):t._e()])}))],2)})),0),e("RecipeDetail",t._g({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"recipe-detail",attrs:{recipe:t.recipe,server:t.server}},t.$listeners))],1)},p=[],d=i("c14f"),f=i("1da1"),h=(i("99af"),i("a15b"),i("7d54"),i("5319"),i("159b"),i("2ef0")),v=i("85e4"),b=i("01ea"),g=function(){var t=this,e=t._self._c;return t.recipe?e("div",{staticClass:"m-recipe-detail"},[e("div",{staticClass:"m-item"},[e("el-popover",{attrs:{"popper-class":"u-icon-popper",placement:"right","visible-arrow":!1,trigger:"hover"}},[e("Item",{attrs:{item_id:t.recipe.item_id}}),e("div",{staticClass:"u-img",attrs:{slot:"reference"},slot:"reference"},[t.recipe.CreateItemMin1!=t.recipe.CreateItemMax1?e("span",{staticClass:"u-amount"},[t._v(" "+t._s(t.recipe.CreateItemMin1)+"~"+t._s(t.recipe.CreateItemMax1)+" ")]):1!=t.recipe.CreateItemMin1?e("span",{staticClass:"u-amount"},[t._v(" "+t._s(t.recipe.CreateItemMin1)+" ")]):t._e(),e("div",{staticClass:"u-border",style:{backgroundImage:t.item_border(t.recipe.Quality),opacity:5==t.recipe.Quality?.9:1}}),e("img",{attrs:{src:t.iconLink(t.recipe.IconID),alt:t.recipe.Name}})])],1),e("div",{staticClass:"m-text"},[e("span",{staticClass:"u-name",class:"u-quality--".concat(t.recipe.Quality)},[t._v(t._s(t.recipe.Name))]),e("div",{staticClass:"u-info"},[e("span",[t._v(" 需求等级: "),e("b",[t._v(t._s(t.recipe.nLevel||"未知"))])]),e("span",[t._v(" 消耗精力: "),e("b",[t._v(t._s(t.recipe.CostVigor||t.recipe.CostStamina))])]),e("span",[t._v(" 经验值: "),e("b",[t._v(t._s(t.recipe.Exp))])])])])],1),"std"==t.client?e("div",{staticClass:"u-price"},[t._v(" ["+t._s(t.server)+"] 昨日平均价格: "),e("PriceItem",{attrs:{server:t.server,name:t.recipe.Name,item_id:t.recipe.item_id,price:t.get_price(t.server,t.recipe.item_id)}})],1):t._e(),t.recipe.szTip?t._l(t.textFilter(t.recipe.szTip),(function(i){return e("span",{key:i,staticClass:"u-desc"},[t._v(t._s(i))])})):t._e(),t.recipe.materials&&t.recipe.materials.length?e("div",{staticClass:"u-children"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合成所需材料")]),t._l(t.recipe.materials,(function(i,n){return e("div",{key:n,staticClass:"u-child"},[e("el-popover",{attrs:{"popper-class":"u-icon-popper",placement:"right","visible-arrow":!1,width:"auto",trigger:"hover"}},[e("Item",{attrs:{item_id:i.item_id}}),e("div",{staticClass:"u-img",attrs:{slot:"reference"},slot:"reference"},[e("div",{staticClass:"u-border",style:{backgroundImage:t.item_border(i.item.Quality),opacity:5==i.item.Quality?.9:1}}),e("img",{attrs:{src:t.iconLink(i.item.item_info.IconID),alt:i.item.item_info.Name}})])],1),e("div",{staticClass:"u-info"},[e("div",{staticClass:"u-name"},[e("span",{class:"u-quality--".concat(i.item.Quality)},[t._v(" "+t._s(i.item.item_info.Name))]),e("span",{staticClass:"u-num"},[t._v(" 数量： "+t._s(i.count||1)+" ")])]),e("div",{staticClass:"u-price"},[t._v(" "+t._s(t.getPriceType(t.get_price(t.server,i.item_id)))+" "),e("PriceItem",{attrs:{server:t.server,name:i.item.item_info.Name,item_id:i.item_id,price:t.get_price(t.server,i.item_id)}})],1)])],1)}))],2):t._e(),e("div",{staticClass:"m-add"},[e("el-input-number",{attrs:{min:1},nativeOn:{click:function(t){t.stopPropagation()}},model:{value:t.recipe.count,callback:function(e){t.$set(t.recipe,"count",e)},expression:"recipe.count"}}),e("el-button",{attrs:{icon:"el-icon-shopping-cart-2",type:"success"},on:{click:function(e){return t.onAddCartItem()}}})],1)],2):t._e()},I=[],_=i("5530"),y=(i("4d63"),i("c607"),i("2c3e"),i("25f0"),i("2f62")),C=i("e1bd"),A=i("c7fa"),M=function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{"popper-class":"m-add-price",placement:"bottom-end",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},["cart"==t.type?e("el-divider",{attrs:{"content-position":"left"}},[t._v("修改 [ "),e("b",[t._v(t._s(t.name))]),t._v(" ] 账单单价")]):e("el-divider",{attrs:{"content-position":"left"}},[t._v("修改 [ "),e("b",[t._v(t._s(t.name))]),t._v(" ] 单价")]),e("div",{staticClass:"u-add"},[e("el-input",{staticClass:"u-input",attrs:{type:"number",size:"mini"},model:{value:t.newPrice.jin,callback:function(e){t.$set(t.newPrice,"jin",e)},expression:"newPrice.jin"}}),e("img",{attrs:{src:"".concat(t.img,"/jin.png"),alt:"金"}}),e("el-input",{staticClass:"u-input",attrs:{type:"number",size:"mini"},model:{value:t.newPrice.yin,callback:function(e){t.$set(t.newPrice,"yin",e)},expression:"newPrice.yin"}}),e("img",{attrs:{src:"".concat(t.img,"/yin.png"),alt:"银"}}),e("el-input",{staticClass:"u-input",attrs:{type:"number",size:"mini"},model:{value:t.newPrice.tong,callback:function(e){t.$set(t.newPrice,"tong",e)},expression:"newPrice.tong"}}),e("img",{attrs:{src:"".concat(t.img,"/tong.png"),alt:"铜"}}),e("el-button",{staticClass:"u-button",attrs:{size:"mini"},on:{click:t.onUpdateCustomPrice}},[t._v("确定")])],1),e("template",{slot:"reference"},[e("div",{staticClass:"m-price-item"},["cart"==t.type?[e("i",{staticClass:"u-edit el-icon-edit",attrs:{title:"修改价格"}}),t.price!=t.origin_price?e("i",{staticClass:"u-edit el-icon-close",attrs:{title:"取消自定义价格"},on:{click:function(e){return e.stopPropagation(),t.onRemoveCustomPrice.apply(null,arguments)}}}):t._e(),t.showPrice?e("GamePrice",{staticClass:"u-price-num",attrs:{price:t.showPrice,align:t.align}}):e("span",{staticClass:"u-null"},[t._v("暂无价格")])]:[e("i",{staticClass:"u-edit el-icon-edit",attrs:{title:"修改价格"}}),"custom"==t.price.from?e("i",{staticClass:"u-edit el-icon-close",attrs:{title:"取消自定义价格"},on:{click:function(e){return e.stopPropagation(),t.onRemoveCustomPrice.apply(null,arguments)}}}):t._e(),t.showPrice?e("GamePrice",{staticClass:"u-price-num",attrs:{price:t.showPrice,align:t.align}}):e("span",{staticClass:"u-null"},[t._v("暂无价格")])]],2)])],2)},Z=[],N=i("ade3"),w=i("1248"),k={name:"PriceItem",props:["price","server","name","item_id","type","origin_price","align","count"],components:{GamePrice:w["a"]},data:function(){return{visible:!1,newPrice:{jin:"",yin:"",tong:""}}},computed:{img:function(){return b["__imgPath"]+"image/price/"},showPrice:function(){return"cart"==this.type?this.count?this.price*this.count:this.price:this.price.price}},methods:{reset:function(){var t=this.price||0,e=Math.floor(t/1e4),i=Math.floor(t%1e4/100),n=t%100;this.newPrice={jin:e,yin:i,tong:n}},onRemoveCustomPrice:function(){"cart"==this.type?this.$emit("update_price",this.origin_price):this.$store.commit("remove_custom_prices",["".concat(this.server,"_").concat(this.item_id)])},onUpdateCustomPrice:function(){var t=this.newPrice,e=t.jin,i=t.yin,n=t.tong,a=Number(1e4*e)+Number(100*i)+Number(n);"cart"==this.type?this.$emit("update_price",a):this.$store.commit("update_custom_prices",Object(N["a"])({},"".concat(this.server,"_").concat(this.item_id),{from:"custom",price:a})),this.visible=!1,this.reset()}},mounted:function(){this.reset()}},D=k,j=(i("94d2"),i("2877")),L=Object(j["a"])(D,M,Z,!1,null,null,null),O=L.exports,R={name:"RecipeDetail",props:["recipe","server"],components:{Item:A["a"],PriceItem:O},data:function(){return{childrenList:[]}},computed:Object(_["a"])(Object(_["a"])({},Object(y["b"])(["get_price"])),{},{client:function(){return this.$store.state.client}}),methods:{iconLink:v["l"],onAddCartItem:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.parent,a=i.require_count_unit;t=t||this.recipe;var c=t.materials.map((function(t){return Object(_["a"])(Object(_["a"])({},t),{},{price_unit:e.get_price(e.server,t.item_id).price||0,price_unit_origin:e.get_price(e.server,t.item_id).price||0,make:!1})})),s=this.get_price(this.server,t.item_id).price,r=Object(_["a"])(Object(_["a"])({recipe:Object(h["pick"])(t,["Name","CreateItemMin1","CreateItemMax1","Quality","IconID","nLevel","Exp"]),server:this.server,materials:c},Object(h["pick"])(t,["item_id","item","count"])),{},{yield_count_unit:t.CreateItemMin1,yield_count:t.CreateItemMin1*t.count,price_unit:s||0,price_unit_origin:s||0,cost_vigor:t.CostVigor||t.CostStamina,calc_tax:!0,id:Object(C["a"])()});n&&(r.parent=n,r.is_material=!0),a&&(r.require_count_unit=a),this.$emit("addCartItem",r)},getPriceType:function(t){return"custom"==t.from?"[自定义价格] 单价:":"npc"==t.from?"[NPC出售] 单价:":"[".concat(this.server,"] 昨日平均单价:")},textFilter:function(t){var e,i=new RegExp('<Text>text="([^]*?)"\\s*?font=(\\d+)\\s*?<\\/text>',"gimy"),n=[];while(e=i.exec(t))n.push(e);for(var a=[],c=0,s=n;c<s.length;c++){var r=s[c];a.push(r[1].replace(/[\\n]/g,""))}return a=a.filter(Boolean),a},item_border:function(t){switch(t){case 3:return"url(".concat(b["__imgPath"],"image/item/blue.png)");case 4:return"url(".concat(b["__imgPath"],"image/item/purple.png)");case 5:return"url(".concat(b["__imgPath"],"image/item/orange.gif)");default:return""}}}},x=R,P=(i("4ffe"),Object(j["a"])(x,g,I,!1,null,null,null)),S=P.exports,G={name:"Recipe",props:["list","craftKey","server"],data:function(){return{showIndex:0,recipe:{},loading:!1,children:[],prices:{},itemId:0}},components:{RecipeDetail:S},computed:{client:function(){return this.$store.state.client}},methods:{iconLink:v["l"],loadItem:function(t){var e=this;this.loading=!0,this.getRecipe(this.craftKey,t,this.client).then((function(t){e.recipe=t})).finally((function(){e.loading=!1}))},getRecipe:function(t,e,i){var n=this;return Object(f["a"])(Object(d["a"])().m((function a(){var r,o,l,u,m;return Object(d["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,Object(s["e"])(t,e,i);case 1:r=a.v,o=r.data,l=[],o.item_id=o.CreateItemType1+"_"+o.CreateItemIndex1,u=1;case 2:if(!(u<=8)){a.n=5;break}if(!o["RequireItemIndex".concat(u)]){a.n=3;break}l.push({item_id:o["RequireItemType".concat(u)]+"_"+o["RequireItemIndex".concat(u)],count:o["RequireItemCount".concat(u)]}),a.n=4;break;case 3:return a.a(3,5);case 4:u++,a.n=2;break;case 5:return m=[].concat(Object(c["a"])(l.map((function(t){return t.item_id}))),[o.item_id]).join(","),a.n=6,Object(s["c"])(n.client,m).then((function(t){var e=Object(h["keyBy"])(t.data,"id");l.forEach((function(t){var i=e[t.item_id];t.item=i||{item_info:{Name:"未知"}}})),e[o.item_id]&&(o.item=e[o.item_id]||{item_info:{Name:"未知"}})}));case 6:return a.n=7,n.$store.dispatch("fetch_prices",{server:n.server,ids:[].concat(Object(c["a"])(l.map((function(t){return t.item_id}))),[o.item_id])});case 7:return o.materials=l,o.count=1,a.a(2,o)}}),a)})))()},changeIndex:function(t){this.showIndex=this.showIndex==t?-1:t},changeItem:function(t){t!=this.itemId&&(this.itemId=t,this.loadItem(t))},onAddCartItem:function(t){var e=this;return Object(f["a"])(Object(d["a"])().m((function i(){var n;return Object(d["a"])().w((function(i){while(1)switch(i.n){case 0:return i.n=1,e.getRecipe(e.craftKey,t.ID,e.client);case 1:n=i.v,n.count=e.recipe.count,e.$refs["recipe-detail"].onAddCartItem(n);case 2:return i.a(2)}}),i)})))()},onlyInteger:function(){var t=String(this.recipe.count).replace(/[^\.\d]/g,"").replace(".","");this.recipe.count=~~t},addCartItemAsMaterial:function(t){var e=this;return Object(f["a"])(Object(d["a"])().m((function i(){var n,a,c,s,r,o;return Object(d["a"])().w((function(i){while(1)switch(i.n){case 0:return n=t.item,a=t.recipe,c=t.require_count,s=t.require_count_unit,i.n=1,e.getRecipe(e.craftKey,a.ID,e.client);case 1:r=i.v,o=Math.ceil(c/r.CreateItemMin1),r.count=o,e.$refs["recipe-detail"].onAddCartItem(r,{parent:n.id,require_count_unit:s});case 2:return i.a(2)}}),i)})))()}},watch:{list:{deep:!0,handler:function(t){t.length&&t[0].list.length&&this.changeItem(t[0].list[0].ID)}},server:function(){this.loadItem(this.itemId)},craftKey:function(){this.showIndex=0}}},W=G,Y=(i("b5ad"),Object(j["a"])(W,m,p,!1,null,null,null)),T=Y.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-manufacture-cart"},[e("div",{staticClass:"m-manufacture-title"},[t.plan.title?e("el-tooltip",{attrs:{placement:"top",content:t.plan.title}},[e("span",{staticClass:"u-title",attrs:{title:t.plan.title}},[t._v(t._s(t.plan.title))])]):e("span",{staticClass:"u-title",attrs:{title:t.plan.title}},[t._v("成本计算器")]),t.cartList.length?e("el-button",{staticClass:"u-del",attrs:{plain:"",type:"info",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.onRemove()}}}):t._e()],1),e("div",{staticClass:"m-cart-body"},[e("div",{staticClass:"m-cart-scroll"},[t.cartList.length?e("div",{staticClass:"m-cart-list"},t._l(t.cartList,(function(i,n){return e("div",{key:n,staticClass:"m-item"},[e("div",{staticClass:"u-header"},[e("div",{staticClass:"u-header-inner"},[e("div",{staticClass:"u-border",style:{backgroundImage:t.item_border(i.item.Quality),opacity:5==i.item.Quality?.9:1}}),e("img",{staticClass:"u-img",attrs:{src:t.iconLink(i.item.item_info.IconID),alt:i.item.item_info.Name}}),e("span",{staticClass:"u-title",class:"u-quality--".concat(i.item.Quality)},[t._v(t._s(i.item.item_info.Name))]),i.fold?e("span",[t._v(" x "+t._s(i.count)+" ")]):t._e()]),e("i",{staticClass:"u-del",class:i.fold?"el-icon-s-unfold":"el-icon-s-fold",on:{click:function(e){return t.$set(i,"fold",!i.fold)}}}),i.is_material?t._e():e("i",{staticClass:"el-icon-delete u-del",on:{click:function(e){return t.onRemove(i)}}})]),e("div",{staticClass:"u-info"},[i.fold?t._e():e("el-divider",{attrs:{"content-position":"left"}},[t._v(" [ "+t._s(i.server)+" ] - "),e("i",{staticClass:"el-icon-box"}),t._v(" 材料成本统计 "),e("el-button",{staticClass:"u-price-mode-switch",attrs:{type:"text"},on:{click:function(e){return t.switchPriceMode(i)}}},[e("i",{staticClass:"el-icon-sort"}),t._v(" "+t._s("single"==i.priceMode?"单价":"总价")+" ")])],1),i.materials.length&&!i.fold?e("div",{staticClass:"u-children"},t._l(i.materials,(function(n,a){return e("div",{key:a,staticClass:"u-child"},[e("div",{staticClass:"u-img"},[e("el-popover",{attrs:{"popper-class":"u-icon-popper",placement:"right","visible-arrow":!1,trigger:"click"}},[e("Item",{attrs:{item_id:n.item_id}}),e("img",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference",src:t.iconLink(n.item.item_info.IconID),alt:n.item.item_info.Name},slot:"reference"})],1),e("span",[e("span",{class:"u-quality--".concat(n.item.Quality)},[t._v(t._s(n.item.item_info.Name))]),t._v(" x "),e("b",[t._v(t._s(n.count*i.count))])])],1),t.canMake(n)?[e("el-tooltip",{attrs:{effect:"dark",content:n.make?"改为购买":"改为手搓",placement:"bottom"}},[e("i",{staticClass:"u-button el-icon-scissors",class:{"is-active":n.make},on:{click:function(e){return t.onSwitchMaterialSource(i,n)}}})])]:t._e(),n.make?e("GamePrice",{staticClass:"u-price-num",class:{"is-make":n.make},attrs:{price:n.price_unit*n.count*i.count}}):e("PriceItem",{staticClass:"u-price-num",attrs:{count:"single"==i.priceMode?1:n.count*i.count,price:n.price_unit,origin_price:n.price_unit_origin,name:n.item.item_info.Name,type:"cart"},on:{update_price:function(t){n.price_unit=t}}})],2)})),0):t._e(),i.fold?t._e():e("div",{staticClass:"u-item-num"},[e("span",[t._v("制作产量：")]),e("el-input-number",{attrs:{disabled:i.is_material,size:"mini",step:1,min:1,"step-strictly":""},model:{value:i.yield_count,callback:function(e){t.$set(i,"yield_count",e)},expression:"item.yield_count"}})],1),i.fold?t._e():e("div",{staticClass:"u-item-num"},[e("span",[t._v("制作次数：")]),e("el-input-number",{attrs:{size:"mini",step:1,min:1,"step-strictly":""},on:{change:function(e){return t.onChangeItemCount(i)}},model:{value:i.count,callback:function(e){t.$set(i,"count",e)},expression:"item.count"}})],1),i.fold?t._e():e("div",{staticClass:"u-item-num"},[t._m(0,!0),e("b",[t._v(t._s(i.cost_vigor*i.count))])]),i.is_material?e("div",{staticClass:"u-item-num"},[t._m(1,!0),e("span",{staticClass:"u-price"},[e("GamePrice",{staticClass:"u-price-num",attrs:{price:t.calcCartItemCostPrice(i),align:!0}})],1)]):e("price-detail",{attrs:{price_count:i.yield_count,price:i.price_unit,origin_price:i.price_unit_origin,price_name:i.recipe.Name,cost:-t.calcCartItemCostPrice(i),tax:-t.calcCartItemTax(i),profit:t.calcCartItemProfit(i),tax_mutable:!0,price_mutable:!0,calc_tax:i.calc_tax},on:{update_price:function(t){i.price_unit=t},update_tax:function(t){i.calc_tax=t}}})],1)])})),0):e("div",{staticClass:"m-null"},[t._v("- 暂未添加生产配方 -")])]),e("div",{staticClass:"m-stat"},[e("div",{staticClass:"m-all"},[e("div",{staticClass:"u-label"},[t._v(" 总计 "),e("el-tooltip",{attrs:{content:"查看材料详情"}},[e("el-button",{attrs:{type:"text",icon:"el-icon-toilet-paper"},on:{click:t.onViewMaterials}})],1)],1),e("div",{staticClass:"u-value"},[e("div",{staticClass:"u-num"},[t._m(2),e("b",[t._v(t._s(t.allExp))])]),e("price-detail",{attrs:{price:t.allPrice,cost:-t.allCostPrice,tax:-t.allTax,profit:t.allProfit}})],1)]),e("div",{staticClass:"m-actions"},[this.plan.id?e("el-button",{staticClass:"u-delete",attrs:{type:"info",icon:"el-icon-delete",size:"small",loading:t.loading},on:{click:function(e){return t.onDeletePlan()}}},[t._v(" 删除账单 ")]):t._e(),this.plan.id?e("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"small",loading:t.loading},on:{click:function(e){return t.onSavePlan()}}},[t._v(" 另存为 ")]):t._e(),e("el-button",{attrs:{type:"success",icon:"el-icon-document-checked",size:"small",loading:t.loading},on:{click:function(e){return t.onSavePlan(t.plan)}}},[t._v(" 保存 ")])],1)])]),e("CartMaterialsVue",{ref:"materials"})],1)},z=[function(){var t=this,e=t._self._c;return e("span",[e("i",{staticClass:"el-icon-sunny"}),t._v(" 消耗精力值：")])},function(){var t=this,e=t._self._c;return e("span",[e("i",{staticClass:"el-icon-coin"}),t._v(" 预计花费：")])},function(){var t=this,e=t._self._c;return e("span",[e("i",{staticClass:"el-icon-sunny"}),t._v(" 消耗精力值：")])}],Q=i("b85c"),B=(i("7db0"),i("f665"),i("a732"),i("b64b"),i("e343")),J=i("8f09"),U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"u-item-num",class:{"no-profit":t.profit<0}},[e("span",[e("el-popover",{attrs:{placement:"top",trigger:"hover","popper-class":"m-price-popper",width:"320"},scopedSlots:t._u([{key:"reference",fn:function(){return[e("i",{staticClass:"el-icon-tickets",staticStyle:{cursor:"pointer"}})]},proxy:!0}])},[e("div",{staticClass:"u-price-detail"},[e("div",{staticClass:"u-item-num"},[e("span",[e("i",{staticClass:"el-icon-coin"}),t._v(" 预计售价：")]),e("span",{staticClass:"u-price"},[t.price_mutable?e("PriceItem",{staticClass:"u-price-num",attrs:{count:t.price_count,price:t.price,origin_price:t.origin_price,name:t.price_name,type:"cart",align:!0},on:{update_price:function(e){return t.$emit("update_price",e)}}}):e("GamePrice",{staticClass:"u-price-num",attrs:{price:t.price*(t.price_count||1),align:!0}})],1)]),e("div",{staticClass:"u-item-num"},[e("span",[e("i",{staticClass:"el-icon-coin"}),t._v(" 项目成本：")]),e("span",{staticClass:"u-price"},[e("GamePrice",{staticClass:"u-price-num",attrs:{price:t.cost,align:!0}})],1)]),e("div",{staticClass:"u-item-num",class:{"is-cancel":!t.calc_tax}},[e("span",{staticClass:"u-label"},[e("i",{staticClass:"el-icon-coin"}),t._v(" 交易行税：")]),e("span",{staticClass:"u-price"},[t.tax_mutable?e("i",{staticClass:"u-edit",class:t.calc_tax?"el-icon-close":"el-icon-refresh-left",attrs:{title:"取消税收"},on:{click:function(e){return e.stopPropagation(),t.$emit("update_tax",!t.calc_tax)}}}):t._e(),e("GamePrice",{staticClass:"u-price-num",attrs:{price:t.tax,align:!0}})],1)]),e("div",{staticClass:"u-item-num",class:{"no-profit":t.profit<0}},[e("span",[e("i",{staticClass:"el-icon-coin"}),t._v(" 预计收益：")]),e("span",{staticClass:"u-price"},[e("GamePrice",{staticClass:"u-price-num",attrs:{price:t.profit,align:!0}})],1)])])]),t._v(" 预计收益：")],1),e("span",{staticClass:"u-price"},[e("GamePrice",{staticClass:"u-price-num",attrs:{price:t.profit,align:!0}})],1)])},X=[],H={name:"PriceDetail",components:{GamePrice:w["a"],PriceItem:O},props:{price_count:{type:Number},price:{type:Number,default:0},origin_price:{type:Number,default:0},price_name:{type:String,default:""},price_mutable:{type:Boolean,default:!1},cost:{type:Number,default:0},calc_tax:{type:Boolean,default:!0},tax:{type:Number,default:0},tax_mutable:{type:Boolean,default:!1},profit:{type:Number,default:0}}},F=H,V=(i("2de0"),Object(j["a"])(F,U,X,!1,null,null,null)),K=V.exports,q=i("c9d2"),$=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,title:"账单材料清单",width:"520px"},on:{"update:visible":function(e){t.visible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.close}},[t._v("确认")])]},proxy:!0}])},[e("div",{staticClass:"m-materials-list"},[e("el-table",{attrs:{data:t.data,border:"",size:"mini","max-height":"480px"}},[e("el-table-column",{attrs:{prop:"Name",label:"物品",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.row;return[e("div",{staticClass:"u-item"},[e("el-popover",{attrs:{"popper-class":"u-icon-popper",placement:"right","visible-arrow":!1,trigger:"click"}},[e("Item",{attrs:{item_id:n.id}}),e("img",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference",src:t.iconLink(n.item.item_info.IconID),alt:n.item.item_info.Name},slot:"reference"})],1),e("span",{staticClass:"u-title"},[e("span",{class:"u-quality--".concat(n.item.Quality)},[t._v(t._s(n.item.item_info.Name))])])],1)]}}])}),e("el-table-column",{attrs:{prop:"count",label:"数量",sortable:"",width:"80px",align:"center"}}),e("el-table-column",{attrs:{prop:"price",label:"成本",sortable:"",align:"right","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(t){var i=t.row;return[e("div",{staticClass:"u-price-num"},[e("GamePrice",{attrs:{price:i.price,align:!0}})],1)]}}])})],1)],1)])},tt=[],et={name:"CartMaterials",components:{GamePrice:w["a"],Item:A["a"]},props:["materials"],data:function(){return{visible:!1,data:[]}},methods:{iconLink:v["l"],open:function(t){this.visible=!0,this.data=t},close:function(){this.visible=!1,this.data=[]}}},it=et,nt=(i("dd71"),Object(j["a"])(it,$,tt,!1,null,null,null)),at=nt.exports,ct={name:"cart",components:{Item:A["a"],GamePrice:w["a"],PriceItem:O,PriceDetail:K,CartMaterialsVue:at},props:["craftList"],data:function(){return{plan:"",cartList:[],loading:!1,isLogin:q["a"].isLogin()}},computed:{allExp:function(){return this.cartList.length?this.cartList.map((function(t){return t.cost_vigor*t.count})).reduce((function(t,e){return t+e}),0):0},allPrice:function(){return this.cartList.length?this.cartList.reduce((function(t,e){return e.is_material?t:t+(e.price_unit*e.yield_count||0)}),0):0},allCostPrice:function(){var t=this;return this.cartList.length?this.cartList.map((function(e){return t.calcCartItemCostPrice(e)})).reduce((function(t,e){return t+e}),0):0},allTax:function(){var t=this;return this.cartList.length?this.cartList.map((function(e){return e.is_material?0:t.calcCartItemTax(e)})).reduce((function(t,e){return t+e}),0):0},allProfit:function(){return this.cartList.length?this.allPrice-this.allCostPrice-this.allTax:0},crafts:function(){return this.craftList.map((function(t){return t.list})).reduce((function(t,e){return t.concat(e)}),[])}},methods:{iconLink:v["l"],getMaterials:function(){var t,e={},i=Object(Q["a"])(this.cartList);try{for(i.s();!(t=i.n()).done;){var n,a=t.value,c=Object(Q["a"])(a.materials);try{for(c.s();!(n=c.n()).done;){var s=n.value;s.make||(e[s.item_id]||(e[s.item_id]={count:0,price:0,item:s.item}),e[s.item_id].count+=s.count*a.count,e[s.item_id].price+=s.price_unit*s.count*a.count)}}catch(r){c.e(r)}finally{c.f()}}}catch(r){i.e(r)}finally{i.f()}return Object.keys(e).map((function(t){return Object(_["a"])(Object(_["a"])({},e[t]),{},{id:t})}))},onViewMaterials:function(){this.$refs.materials.open(this.getMaterials())},onRemove:function(t){t||(this.plan="",this.cartList=[]);var e=this.cartList.filter((function(e){return e.parent===t.id}));this.cartList=this.cartList.filter((function(i){return i!==t&&!e.includes(i)}))},itemPrices:function(t){var e=this;return t.map((function(t){var i=0;return e.prices[t.priceID]&&(i=t.count*e.prices[t.priceID]),e.prices[t.ID]&&(i=t.count*e.prices[t.ID]),i})).reduce((function(t,e){return t+e}),0)},item_border:function(t){switch(t){case 3:return"url(".concat(b["__imgPath"],"image/item/blue.png)");case 4:return"url(".concat(b["__imgPath"],"image/item/purple.png)");case 5:return"url(".concat(b["__imgPath"],"image/item/orange.gif)");default:return""}},switchPriceMode:function(t){this.$set(t,"priceMode","single"==t.priceMode?"total":"single")},add:function(t){this.cartList.push(t)},calcCartItemCostPrice:function(t){return t.materials.map((function(t){return t.make?0:t.price_unit*t.count})).reduce((function(t,e){return t+e}),0)*t.count},calcCartItemTax:function(t){return t.price_unit*t.yield_count*.05},calcCartItemProfit:function(t){var e=t.price_unit*t.yield_count-this.calcCartItemCostPrice(t);return t.calc_tax?e-this.calcCartItemTax(t):e},canMake:function(t){return this.crafts.some((function(e){return e.item_id==t.item_id}))},onSwitchMaterialSource:function(t,e){if(e.make)e.make=!1,this.cartList=this.cartList.filter((function(e){return e.parent!==t.id}));else{var i=this.crafts.find((function(t){return t.item_id==e.item_id}));e.make=!0,this.$emit("material-make",{item:t,material:e,recipe:i,require_count:e.count*t.count,require_count_unit:e.count})}},onChangeItemCount:function(t){var e=t.yield_count_unit*t.count;if(!t.is_material&&t.yield_count<e&&(t.yield_count=e),t.materials.some((function(t){return t.make}))){var i=this.cartList.find((function(e){return e.parent===t.id}));i.yield_count=i.require_count_unit*t.count,i.count=Math.max(i.count,Math.ceil(i.yield_count/i.yield_count_unit))}},onSavePlan:function(t){var e=this;if(this.cartList.length){var i=!(null!==t&&void 0!==t&&t.id);if(i)this.$prompt("请输入账单名称","保存新账单",{inputValue:"账单 ".concat(Object(J["c"])(new Date)),closeOnClickModal:!1}).catch((function(t){return console.error(t),{}})).then((function(t){var i=t.value;if(i){var n={title:i,relation:e.cartList,type:3,public:1};return Object(B["a"])(n)}})).then((function(t){t&&(e.$notify({title:"保存成功",type:"success"}),e.plan=t.data.data,e.$emit("update-plan"))})).finally((function(){e.loading=!1}));else{var n={relation:this.cartList};Object(B["g"])(t.id,n).then((function(t){e.$notify({title:"保存成功",type:"success"}),e.$emit("update-plan")})).finally((function(){e.loading=!1}))}}else this.$message.error("当前成本计算器内没有项目")},onDeletePlan:function(){var t=this;this.$confirm("确认删除账单？","删除账单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(B["c"])(t.plan.id).then((function(){t.$notify({title:"删除成功",type:"success"}),t.$emit("update-plan"),t.plan="",t.cartList=[]})).finally((function(){t.loading=!1}))})).finally((function(){t.loading=!1}))},mergePlan:function(t){this.cartList=[].concat(Object(c["a"])(this.cartList),Object(c["a"])(t))},loadPlan:function(t){var e,i=this;if(null!==(e=this.cartList)&&void 0!==e&&e.length){var n="当前计算器内有项目没有清空，请选择当前操作。<br />";this.plan&&(n+="当前正在查看账单，如果选择合并会将新账单内容合并进旧账单。<br />"),n+="放弃查看账单请直接关闭弹窗。",this.$confirm(n,"确认",{distinguishCancelAndClose:!0,confirmButtonText:"合并",cancelButtonText:"覆盖",dangerouslyUseHTMLString:!0}).then((function(){i.plan||(i.plan=t),i.cartList=[].concat(Object(c["a"])(i.cartList),Object(c["a"])(t.relation))})).catch((function(e){if("cancel"==e)i.plan=t,i.cartList=t.relation;else if("close"==e)return}))}else this.plan=t,this.cartList=this.cartList.concat(t.relation)}}},st=ct,rt=(i("470e"),i("0db8"),Object(j["a"])(st,E,z,!1,null,null,null)),ot=rt.exports,lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-myList"},[e("div",{staticClass:"m-manufacture-title m-manufacture-title-plans"},[e("span",{staticClass:"u-title"},[t._v("我的账单")]),e("el-checkbox",{attrs:{label:"选择模式",border:""},model:{value:t.selectMode,callback:function(e){t.selectMode=e},expression:"selectMode"}}),e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("el-button",{staticClass:"u-del",attrs:{plain:"",type:"info",size:"mini",icon:"el-icon-setting"}}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"cancel-select"}},[t._v("取消选中")]),e("el-dropdown-item",{attrs:{command:"select-all"}},[t._v("全部选中")]),e("el-dropdown-item",{attrs:{command:"select-yesterday"}},[t._v("选中昨日及以前所有账单")]),e("el-dropdown-item",{attrs:{command:"delete-select"}},[t._v("删除选中账单")]),e("el-dropdown-item",{attrs:{command:"merge-select"}},[t._v("合并选中账单")])],1)],1)],1),e("div",{staticClass:"m-box"},[t.isLogin?t._l(t.list,(function(i,n){return e("div",{key:n,staticClass:"m-item",on:{click:function(e){return t.change(i.id)}}},[e("div",{staticClass:"u-title"},[e("span",[t._v(t._s(i.title))]),e("div",{staticClass:"u-meta",on:{click:function(t){t.stopPropagation(),i.time_type="created"==i.time_type?"updated":"created"}}},["created"==i.time_type?[t._v(" 创建于 "+t._s(t.showTime(new Date(1e3*i.created)))+" ")]:[t._v(" 编辑于 "+t._s(t.showTime(new Date(1e3*i.updated)))+" ")]],2)]),t.selectMode?[e("el-checkbox",{attrs:{value:t.selected.includes(i.id)},on:{change:function(e){return t.change(i.id)}}})]:t._e()],2)})):e("span",{staticClass:"m-null"},[t._v("- 请登录后查看 -")])],2)])},ut=[],mt=(i("0481"),i("4069"),{name:"MyList",data:function(){return{list:[],isLogin:q["a"].isLogin(),planId:"",visible:!1,loading:!1,selectMode:!1,selected:[]}},methods:{showTime:J["c"],load:function(){var t=this;this.isLogin&&Object(B["e"])({no_page:1}).then((function(e){t.list=e.reverse().map((function(t){return Object(_["a"])(Object(_["a"])({},t),{},{time_type:"created"})}))||[]}))},change:function(t){var e=this;this.selectMode?this.selected.includes(t)?this.selected=this.selected.filter((function(e){return e!=t})):this.selected.push(t):this.loading||(this.loading=!0,Object(B["d"])(t).then((function(t){e.$emit("view-plan",t)})).finally((function(){e.loading=!1})))},handleCommand:function(t){var e=this;if("cancel-select"==t)this.selected=[];else if("select-all"==t)this.selected=this.list.map((function(t){return t.id}));else if("select-yesterday"==t)this.selected=[].concat(Object(c["a"])(this.selected),Object(c["a"])(this.list.filter((function(t){return new Date(1e3*t.created).getTime()<(new Date).setHours(0,0,0,0)})).map((function(t){return t.id}))));else if("delete-select"==t){if(!this.selected.length)return this.$message.error("请先选择要删除的账单");this.$confirm("确定要删除选中的 ".concat(this.selected.length," 条账单记录？删除后不可恢复！"),"确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(B["b"])(e.selected.join(",")).then((function(){e.load()}))})).catch((function(){}))}else if("merge-select"==t){if(!this.selected.length)return this.$message.error("请先选择要合并的账单");this.$confirm("确定要将选中的 ".concat(this.selected.length," 条账单记录合并为一条新账单？"),"确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(B["f"])(e.selected.join(",")).then((function(t){var i=t.map((function(t){return t.relation})).flat();e.$emit("merge-plan",i),e.$notify({title:"选中的账单内容已加入当前成本计算器，若有需要请手动删除选中的账单。",type:"success"})}))})).catch((function(){}))}}},mounted:function(){this.load()}}),pt=mt,dt=(i("2b50"),Object(j["a"])(pt,lt,ut,!1,null,null,null)),ft=dt.exports,ht={name:"Manufacture",components:{Recipe:T,Cart:ot,MyList:ft,CommonToolbar:u["a"]},provide:function(){return{isMiniProgram:this.isMiniProgram}},data:function(){return{craftKey:"",craftTypes:l["a"],craftList:[],search:"",craftName:"",index:-1,list:[],server:"蝶恋花",cartItem:{},active:""}},computed:{isMiniProgram:function(){var t;return(null===(t=document.getElementsByClassName("v-miniprogram"))||void 0===t?void 0:t.length)>0},client:function(){return this.$store.state.client},isStd:function(){return"std"==this.client},serverList:function(){return this.isStd?r:o},showList:function(){var t=this;return this.search?[{BelongName:"搜索结果",list:this.list.reduce((function(e,i){return e.push.apply(e,Object(c["a"])(i.list.filter((function(e){return e.Name.includes(t.search)})))),e}),[])}]:this.list}},methods:{load:function(){var t=this;Object(s["b"])().then((function(e){var i=e.data,n=i.std,a=i.origin,c="std"==t.client?t.toCraftList(n):t.toCraftList(a);t.craftList=c.map((function(t){return t.value=t.key,t.label=t.name,t}))||[],t.craftList.length&&(t.index=0),t.active=t.craftList[0].value})).finally((function(){t.loading=!1}))},loadList:function(t,e){var i=this;Object(s["f"])({client:this.client,type:t,mode:"simple"}).then((function(n){var a=i.craftList[e].list,c=n.data.reduce((function(t,e){return e.item_id=e.CreateItemType1+"_"+e.CreateItemIndex1,t[e.Belong]?t[e.Belong].push(e):t[e.Belong]=[e],t}),{});i.list=a.map((function(t){return c[t.BelongID]&&(t.list=c[t.BelongID],t.list.sort((function(t,e){return Number(e.ID)-Number(t.ID)}))),t})).filter((function(t){return t.list})),i.craftKey=t}))},toCraftList:function(t){var e=this.craftTypes[this.client],i=t.reduce((function(t,e){return t[e.ProfessionID]?t[e.ProfessionID].push(e):t[e.ProfessionID]=[e],t}),{});return e.map((function(t){return i[t.ProfessionID]&&(t.list=i[t.ProfessionID]),t}))},changeCraft:function(t){this.index=this.craftList.findIndex((function(e){return e.value==t}))},onAddCartItem:function(t){this.$refs.cart.add(t)},updateToolbar:function(t){var e=t.type,i=t.search;this.active=e,this.search=i,this.changeCraft(e)},onMaterialMake:function(t){this.$refs.recipe.addCartItemAsMaterial(t)},onPlanUpdate:function(){this.$refs["plan-list"].load()},onViewPlan:function(t){this.$refs.cart.loadPlan(t)},onMergePlan:function(t){this.$refs.cart.mergePlan(t)}},watch:{index:function(t){var e=this.craftList[t],i=e.name,n=e.key;this.craftName=i,this.loadList(n,t)}},mounted:function(){var t=this;this.load(),this.$store.dispatch("getRoles").then((function(){var e=t.$store.state.roles;if(null!==e&&void 0!==e&&e.length){var i=e.reduce((function(t,e){return e.priority>t.priority?e:t}));t.server=i.server}else t.server=t.$store.state.server}))}},vt=ht,bt=(i("7f46"),Object(j["a"])(vt,n,a,!1,null,null,null));e["default"]=bt.exports},fc7f:function(t,e,i){}}]);